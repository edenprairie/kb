{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to Lihe's Notes","text":"graph LR   A[Start] --&gt; B{Error?};   B --&gt;|Yes| C[Hmm...];   C --&gt; D[Debug];   D --&gt; B;   B ----&gt;|No| E[Yay!];"},{"location":"archived/angular/angular_s01/","title":"Angluar Basics","text":"<ul> <li>'`' is called ES2015 backtick</li> <li>use VSCode Intellisense</li> </ul>"},{"location":"archived/angular/angular_s01/#directives","title":"Directives","text":"<ul> <li>*ngIf</li> <li>*ngFor <pre><code>&lt;tr *ngFor='let product of products'&gt;\n&lt;/tr&gt;\n</code></pre></li> </ul> <p>let ... of - iterate objects let ... in - iterate indexes</p>"},{"location":"archived/angular/angular_s01/#binding","title":"Binding","text":""},{"location":"archived/angular/angular_s01/#interpolation","title":"Interpolation","text":"<pre><code>{{ production.name }}\n</code></pre>"},{"location":"archived/angular/angular_s01/#property-binding","title":"Property Binding","text":"<p><pre><code>&lt;img [src]='product.url' [style.width.px]='myWidth'&gt;&lt;/img&gt;\n</code></pre> Favor property binding over interpolation, except expression, like <pre><code>{{ 'hello' + user.name }}\n</code></pre></p>"},{"location":"archived/angular/angular_s01/#event-binding","title":"Event Binding","text":"<pre><code>&lt;button (click)='someHandler()'&gt;&lt;/button&gt;\n</code></pre>"},{"location":"archived/angular/angular_s01/#two-way-binding","title":"Two Way Binding","text":"<p><pre><code>&lt;input [(ngModel)]='someProp'&gt;\n</code></pre> ngModel exists in FormsModule</p>"},{"location":"archived/angular/angular_s01/#pipes","title":"Pipes","text":"<p>pipe do transform data</p> <ul> <li> <p>In interpolation: <pre><code>{{ name.last | uppercase }}\n</code></pre></p> </li> <li> <p>In property binding: <pre><code>&lt;img [title]='product.name | lowercase'&gt;\n</code></pre></p> </li> <li> <p>pipe with args: <pre><code>{{ myData | myPipe: 'arg1' : 'arg2' : 'arg3' : ... }}\n</code></pre></p> </li> </ul>"},{"location":"archived/angular/angular_s01/#interfaces","title":"Interfaces","text":"<p><pre><code>export interface IProduct {\n    id: string;\n    name: string;\n    getDiscount(percent: number) : number;\n}\n</code></pre> Class implements interface</p>"},{"location":"archived/angular/angular_s01/#encapsulate-component-styles","title":"Encapsulate Component Styles","text":"<p>using <code>styles</code> ot <code>styleUrls</code> in @Component</p>"},{"location":"archived/angular/angular_s01/#component-lifecycle-hooks","title":"Component Lifecycle Hooks","text":"<p>lifecycle: create -&gt; render -&gt; create and render children -&gt; process changes (multple interations) -&gt;destroy</p>"},{"location":"archived/angular/angular_s01/#most-used-hooks-defined-as-interfaces","title":"Most used hooks (defined as interfaces):","text":"<ul> <li>onInit: used for initial load, ngOnInit()</li> <li>onChanges: handle input properties, ngOnChange()</li> <li>onDestroy: clean up, ngOnDestroy</li> </ul>"},{"location":"archived/angular/angular_s01/#customize-pipe","title":"Customize Pipe","text":"<p><pre><code>@Pipe({\n    name: 'removeSpace'\n})\n\nexport class RemoveSpacePipe implements PipeTransform {\n    transfor(...) {\n        ...\n    }\n} \n</code></pre> * need declare in appModule * put into shared folder</p>"},{"location":"archived/angular/angular_s02/","title":"Nested Components","text":"<ul> <li><code>@Input()</code> Parent -&gt; Child</li> <li><code>@Output()</code> Parent &lt;- Child, using event</li> </ul>"},{"location":"archived/angular/angular_s02/#usage","title":"Usage","text":"<ol> <li>delcare in appModule</li> <li>put selector in parent component</li> <li>input data in parent use property binding</li> </ol> <p>@Input example * In Parent: <pre><code>...\n    &lt;td&gt;\n        &lt;pm-star [rating]='product.stars'&gt;\n        &lt;/pm-star&gt;\n    &lt;/td&gt;\n...\n</code></pre> * In Child: <pre><code>export class StarComponent {\n    @Input() rating: number;\n    ...\n}\n</code></pre></p> <p>Rasing event using @Output * In Child: <pre><code>export class StarComponent {\n    ...\n    @Output() someName1: EventEmitter&lt;string&gt; = \n        new EventEmitter&lt;string&gt;();\n\n    handleClick() {\n        this.someName1.emit('the value'); //string which is the EventEmitter&lt;_&gt;\n    }\n}\n</code></pre> <pre><code>...\n    &lt;div (click)='handleClick()' &gt;\n    &lt;/div&gt;\n...\n</code></pre></p> <ul> <li>In Parent: <pre><code>...\n    &lt;pm-star [rating]='product.stars' \n        (someName1)='onChildNotify($event)'&gt;\n    &lt;/pm-star&gt;\n...\n</code></pre> <pre><code>export class ParentComponent {\n    ...\n    onChildNotify(message: string) : void {\n        ...\n    }\n}\n</code></pre></li> </ul>"},{"location":"archived/angular/angular_s02/#service-and-dependency-injection","title":"Service and Dependency Injection","text":""},{"location":"archived/angular/angular_s02/#building-a-service","title":"Building a service","text":"<p>create the injectable class <pre><code>import { Injectable } from '@angular/core';\n@Injectable()\nexport class ProductService {\n    getProducts(): IProduct[] {\n        ...\n    }\n}\n</code></pre></p>"},{"location":"archived/angular/angular_s02/#register-a-servcie","title":"Register a servcie","text":"<ul> <li>define provider in appModule (can be used in whole app) or Component (can be used in itself and its children)</li> <li>if defined as provider more than once, it then have multiple instances (not singleton any more)</li> <li>use as singleton is preferred</li> </ul>"},{"location":"archived/angular/angular_s02/#inject-a-service","title":"Inject a service","text":"<p>use constructor injection <pre><code>...\n    constructor(private _productService: ProductService) {\n    }\n...\n</code></pre></p>"},{"location":"archived/angular/angular_s02/#retrive-data-using-http","title":"Retrive Data using HTTP","text":"Promise Observable provides a single future value emits multiple values over time not lazy lazy not cancellable cancellable supports operators <ul> <li>HttpClient exists in HttpClientModule</li> <li>import it in appModule</li> </ul> <p>In appModule: * imports means reference modules outside appModule * declarations means reference class/components inside appModule</p> <p>Example <pre><code>@Injectable()\nexport class ProductService {\n    private _url:string = 'some-url';\n    constructor(private _http: HttpClient) {\n\n    }\n\n    getProducts(): Observable&lt;IProduct[]&gt; {\n        return this._http.get&lt;IProducrt[]&gt;(this._url);\n    }\n}\n</code></pre></p> <ul> <li> </li> <li> </li> </ul>"},{"location":"archived/angular/angular_s02/#observables-and-reactive-extensions","title":"Observables and Reactive Extensions","text":"<ul> <li>manage sync data</li> <li>treat events as collection</li> <li>use reactive extensions(RxJS) no relation with REACT</li> <li>supports Observale operators: map, filter, take, merge ...</li> </ul>"},{"location":"archived/angular/angular_s02/#promise-vs-observables","title":"Promise vs Observables","text":""},{"location":"archived/angular/angular_s02/#exception-handling","title":"Exception Handling","text":"<pre><code>import 'rxjs/add/operator/catch';\nimport 'rxjs/add/operator/do';\n...\n        return this._http.get&lt;IProduct[]&gt;(this._url)\n            .do(data =&gt; console.log(data))\n            .catch(this.handleError);\n...\n\n    private handleError(err: HttpErrorResponse) {\n        //some code\n        console.log(err.message);\n        //or you can re-throw\n        return Observable.throw(err.message)'\n    }\n...\n</code></pre>"},{"location":"archived/angular/angular_s02/#subscribe-to-an-observable","title":"Subscribe to an Observable","text":"<p><pre><code>x.then(valueFn, errorFn) //Promise\nx.subscribe(valueFn, errorFn) //Observable\nx.subscribe(valueFn, errorFn, completeFn) //Observable\nlet s = x.subscribe(valueFn, errorFn, completeFn) //Observable\ns.unsubscribe() //unsubscribe a Observable\n</code></pre> Example <pre><code>...\n    ngOnInit(): void {\n        this._productService.getProducts()\n            .subscribe(\n                products =&gt; this.products = products,\n                error =&gt; this.errorMessage = &lt;any&gt;error //since handleError do re-throw;\n            );\n    }\n...\n</code></pre></p>"},{"location":"archived/angular/angular_s03/","title":"Navigation and Routers","text":"<ul> <li> <p>angular-cli generate</p> <p><code>ng g c products/product-detail.component --flat</code></p> </li> <li> <p>routerLink</p> <p><code>www.server.com/products</code>  HTML 5 style url, requires web server configure with URL rewriting.</p> <p><code>www.server.com/#/products</code> Hash style routing</p> </li> <li> <p>Route definintion: <pre><code>...\n{ path: 'products', component: ProductListComponent }\n...\n</code></pre> Dispaly at: <pre><code>&lt;route-outlet&gt;&lt;/route-outlet&gt;\n</code></pre></p> </li> </ul>"},{"location":"archived/angular/angular_s03/#1-import-routemodule-in-appmodule","title":"1. import RouteModule in appModule","text":"<pre><code>...\n    imports: [\n        ...\n        RouterModule.forRoot([], {useHash: true}),\n        ...\n    ]\n...\n</code></pre>"},{"location":"archived/angular/angular_s03/#2-configure-route","title":"2. configure route","text":"<p>no leading slash on path</p> path example 'products' /products 'product/:id' /product/5 '' default route '**' everything else * order matters * <code>redirectTo</code> for redirect route * routed component does not need selector"},{"location":"archived/angular/angular_s03/#3-route-in-action","title":"3. route in action","text":"<pre><code>&lt;ul class='nav nav-bar'&gt;\n    &lt;li [routerLink]=\"['/welcome', param1, param2, ...]\"&gt;\n    Home\n    &lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>"},{"location":"archived/angular/angular_s03/#4-place-the-views","title":"4. place the views","text":"<pre><code>&lt;route-outlet&gt;&lt;/route-outlet&gt;\n</code></pre> Nested Component Routed Component define a selector no selector nest in another component configure routes no route tie route to actions"},{"location":"archived/angular/angular_s03/#additional-navigation-and-routing","title":"Additional Navigation and Routing","text":"type of Guards description <code>CanActive</code> Guard navigate to a route <code>CanDeactive</code> Guard navigate from a route <code>Resolve</code> Prefetch data before activating a route <code>CanLoad</code> Prevent async routing <ul> <li> <p>Create Guard <pre><code>import { Injectable } from '@angular/core';\nimport { CanActive } from '@angular/router';\n@Injectable\nexport class ProductGuardService implements CanActive {\n    canActive(): boolean {\n        ...\n    }\n}\n</code></pre></p> </li> <li> <p>Register Guard Register in appModule as provider <pre><code>...\n    providers: [ProductGuardService]\n...\n</code></pre></p> </li> <li> <p>Use Guard Use in route configuration <pre><code>    ...\n    { path: 'products', canActive:[ProductGuardService], component: ProudctSomeComponent }\n    ...\n</code></pre> Full example <pre><code>import { Injectable } from '@angular/core';\nimport { CanActivate, ActivatedRouteSnapshot, Router } from '@angular/router';\n@Injectable\nexport class ProductGuardService implements CanActive {\n    constructor(private _router: Router) {}\n    canActivate(route: ActivatedRouterSnapshot): boolean {\n        let id = +route.url[1].path;\n        if (isNaN(id) || id &lt; 1 ) {\n            //in real world, redirect to error page\n            console.log('invalid id');\n            this._router.navigate(['products']);\n            return false;\n        }\n        return true;\n    }\n}\n</code></pre></p> </li> </ul>"},{"location":"archived/angular/angular_s03/#passing-params-to-a-route","title":"Passing params to a route","text":"<ul> <li>In route config:  <pre><code>{path: 'products/:id', component: ProductDetailComponent }\n</code></pre></li> <li>In navigation component:  <pre><code>&lt;a [routerLink]=\"['/products', product.id]\"&gt;&lt;/a&gt;\n</code></pre></li> <li>Reading the param  <pre><code>import { ActivatedRoute } from '@angular/router';\n...\n    constructor(private _route: ActivatiedRoute) {\n        console.log(this._route.snapshot.paramMap.get('id));\n    }\n...\n</code></pre> snapshot: no change expected observable: expected to change, like next button.</li> </ul>"},{"location":"archived/angular/angular_s03/#activating-a-route-with-code","title":"Activating a route with code","text":"<pre><code>import { Router } from '@angular/router';\n...\n    constructor(private _router: Router) {}\n    onBack(): void {\n        this._router.navigate(['products']);\n    }\n...\n</code></pre>"},{"location":"archived/angular/angular_s03/#protecting-routes-with-guards","title":"Protecting routes with Guards","text":""},{"location":"archived/angular/angular_s03/#angular-modules","title":"Angular Modules","text":""},{"location":"archived/angular/angular_s03/#what-is-an-angular-module","title":"What is an angular module?","text":"<ul> <li>a class with <code>ngModule</code> decoration</li> <li>aggregate and re-import</li> <li>can be lazy loading</li> </ul>"},{"location":"archived/angular/angular_s03/#in-a-module","title":"In a module","text":"<ul> <li>Imports</li> <li>Exports</li> <li>Providers</li> <li>Declarations</li> <li>Bootstrap</li> </ul>"},{"location":"archived/angular/angular_s03/#bootstap-array","title":"Bootstap array","text":"<pre><code>    ...\n    // start component\n    bootstrap: [AppComponent]\n    ...\n</code></pre>"},{"location":"archived/angular/angular_s03/#declarations-array","title":"Declarations array","text":"<pre><code>    ...\n    // components, directives, pipes inside the module\n    declarations: [some1, some2 ]\n    ...\n</code></pre>"},{"location":"archived/angular/angular_s03/#exports-array","title":"Exports array","text":"<ul> <li>export components, directives, pipes for other moudles to use</li> <li>never export services</li> </ul>"},{"location":"archived/angular/angular_s03/#imports-array","title":"Imports array","text":"<p>imports external modules</p>"},{"location":"archived/angular/angular_s03/#providers-array","title":"Providers array","text":"<ul> <li>providers on angualr module are global</li> <li>providers on component only visible to the component and its children</li> <li> <p>Guards need be added to providers</p> </li> <li> <p>BrowserModule only imports in the RootModule(AppModule)</p> </li> <li>RouteModule.forRoot should be used in RootModule(AppModule). It will<ol> <li>register router service </li> <li>declare router directive</li> <li>expose configured routes</li> </ol> </li> <li>RouteModule.forChild should be used in feature module, it only does 2,3 above.</li> </ul>"},{"location":"archived/angular/angular_s03/#shared-module","title":"Shared Module","text":"<ul> <li>Export everything inside for re-use.</li> <li>Also export its imports</li> <li>Can import external module even not in its imports</li> </ul>"},{"location":"archived/angular/angular_s04/","title":"Angular Cli","text":"<ul> <li><code>ng v</code></li> <li><code>ng help</code></li> <li><code>ng new</code></li> </ul> <p>polyfills.ts supports old browser</p> <ul> <li><code>ng new hello-world --prefix hw</code></li> <li><code>ng serve</code></li> <li><code>ng serve -o</code> //opens default browser</li> </ul>"},{"location":"archived/angular/angular_s04/#ng-generate","title":"ng generate","text":"assets command class <code>ng g cl</code> component <code>ng g c</code> directive <code>ng g d</code> enum <code>ng g e</code> guard <code>ng g g</code> interface <code>ng g i</code> module <code>ng g m</code> pipe <code>ng g p</code> service <code>ng g s</code> <ul> <li><code>ng test</code></li> <li><code>ng ese</code></li> <li><code>ng build</code></li> <li><code>ng build --prod</code><ul> <li>minify/uglify</li> <li>tree shaking, remove unused branchs and pieces</li> <li>AOT: ahead of time compiler</li> </ul> </li> <li><code>ng build --base-herf</code></li> </ul>"},{"location":"archived/angular/angular_s04/#typesctipt","title":"Typesctipt","text":""},{"location":"archived/angular/angular_s04/#typescript-optional-property-in-interface","title":"Typescript optional property in interface","text":"<p><pre><code>interface {\n    name: string;\n    age? string; //optional\n}\n</code></pre> by default, Typescript class members are public</p>"},{"location":"archived/angular/angular_s05/","title":"MISC","text":""},{"location":"archived/angular/angular_s05/#systemjsconfigjs","title":"systemjs.config.js","text":"<p>index.html --&gt; systemconfig --(packl--)&gt; main.js --&gt; main.ts --(contains)--&gt; platformBrowserDynamic() --(bootstrap)--&gt; AppModule</p>"},{"location":"archived/angular/angular_s05/#vscode","title":"VSCode","text":"<p>settings to exclude some files <pre><code>{\n    \"files.exclude\" : {\n        \"**/.git\": true,\n        \"**/.svn\": true,\n        \"**/.hg\": true\n    }\n}\n</code></pre></p>"},{"location":"archived/dotnet/dotnet_s01/","title":"dotNET QA","text":""},{"location":"archived/dotnet/dotnet_s01/#whats-the-advantage-of-using-systemtextstringbuilder-over-systemstring","title":"What\u2019s the advantage of using System.Text.StringBuilder over System.String?","text":"<p>StringBuilder is more efficient in the cases, where a lot of manipulation is done to the\u00a0text.  Strings are immutable, so each time it\u2019s being operated on, a new instance is\u00a0created.</p>"},{"location":"archived/dotnet/dotnet_s01/#can-you-store-multiple-data-types-in-systemarray","title":"Can you store multiple data types in System.Array?","text":"<p>No.</p>"},{"location":"archived/dotnet/dotnet_s01/#how-can-you-sort-the-elements-of-the-array-in-descending-order","title":"How can you sort the elements of the array in descending order?","text":"<p>By calling Sort() and then Reverse() methods.</p>"},{"location":"archived/dotnet/dotnet_s01/#whats-the-net-datatype-that-allows-the-retrieval-of-data-by-a-unique-key","title":"What\u2019s the .NET datatype that allows the retrieval of data by a unique key?","text":"<p>HashTable.</p>"},{"location":"archived/dotnet/dotnet_s01/#whats-class-sortedlist-underneath","title":"What\u2019s class SortedList underneath?","text":"<p>A sorted HashTable.</p>"},{"location":"archived/dotnet/dotnet_s01/#will-finally-block-get-executed-if-the-exception-had-not-occurred","title":"Will finally block get executed if the exception had not occurred?","text":"<p>Yes.</p>"},{"location":"archived/dotnet/dotnet_s01/#whats-the-c-equivalent-of-c-catch-which-was-a-catch-all-statement-for-any-possible-exception","title":"What\u2019s the C# equivalent of C++ catch (\u2026), which was a catch-all statement for any possible exception?","text":"<p>A catch block that catches the exception of type System.Exception. You can also omit the parameter data type in this case and just write catch {}.</p>"},{"location":"archived/dotnet/dotnet_s01/#can-multiple-catch-blocks-be-executed","title":"Can multiple catch blocks be executed?","text":"<p>No, once the proper catch code fires off, the control is transferred to the finally block (if there are any), and then whatever follows the finally block.</p>"},{"location":"archived/dotnet/dotnet_s01/#why-is-it-a-bad-idea-to-throw-your-own-exceptions","title":"Why is it a bad idea to throw your own exceptions?","text":"<p>Well, if at that point you know that an error has occurred, then why not write the proper code to handle that error instead of passing a new Exception object to the catch block? Throwing your own exceptions signifies some design flaws in the project.</p>"},{"location":"archived/dotnet/dotnet_s01/#whats-a-delegate","title":"What\u2019s a delegate?","text":"<p>A delegate object encapsulates a reference to a method. In C++ they were referred to as function pointers.</p>"},{"location":"archived/dotnet/dotnet_s01/#whats-a-multicast-delegate","title":"What\u2019s a multicast delegate?","text":"<p>It\u2019s a delegate that points to and eventually fires off several methods.</p>"},{"location":"archived/dotnet/dotnet_s01/#hows-the-dll-hell-problem-solved-in-net","title":"How\u2019s the DLL Hell problem solved in .NET?","text":"<p>Assembly versioning allows the application to specify not only the library it needs to run (which was available under Win32), but also the version of the assembly.</p>"},{"location":"archived/dotnet/dotnet_s01/#what-are-the-ways-to-deploy-an-assembly","title":"What are the ways to deploy an assembly?","text":"<p>An MSI installer, a CAB archive, and XCOPY command.</p>"},{"location":"archived/dotnet/dotnet_s01/#whats-a-satellite-assembly","title":"What\u2019s a satellite assembly?","text":"<p>When you write a multilingual or multi-cultural application in .NET, and want to distribute the core application separately from the localized modules, the localized assemblies that modify the core application are called satellite assemblies.</p>"},{"location":"archived/dotnet/dotnet_s01/#what-namespaces-are-necessary-to-create-a-localized-application","title":"What namespaces are necessary to create a localized application?","text":"<p>System.Globalization, System.Resources.</p>"},{"location":"archived/dotnet/dotnet_s01/#whats-the-difference-between-comments-comments-and-comments","title":"What\u2019s the difference between // comments, / / comments and /// comments?","text":"<p>Single-line, multi-line and XML documentation comments.</p>"},{"location":"archived/dotnet/dotnet_s01/#how-do-you-generate-documentation-from-the-c-file-commented-properly-with-a-command-line-compiler","title":"How do you generate documentation from the C# file commented properly with a command-line compiler?","text":"<p>Compile it with a /doc switch.</p>"},{"location":"archived/dotnet/dotnet_s01/#whats-the-difference-between-c-and-code-xml-documentation-tag","title":"What\u2019s the difference between <code>&lt;c&gt;</code> and <code>&lt;code&gt;</code> XML documentation tag?","text":"<p>Single line code example and multiple-line code example.</p>"},{"location":"archived/dotnet/dotnet_s01/#is-xml-case-sensitive","title":"Is XML case-sensitive?","text":"<p>Yes, so <code>&lt;Student&gt;</code> and <code>&lt;student&gt;</code> are different elements.</p>"},{"location":"archived/dotnet/dotnet_s01/#what-debugging-tools-come-with-the-net-sdk","title":"What debugging tools come with the .NET SDK?","text":"<p>CorDBG \u2013 command-line debugger, and DbgCLR \u2013 graphic debugger. Visual Studio .NET uses the DbgCLR. To use CorDbg, you must compile the original C# file using the /debug switch.</p>"},{"location":"archived/dotnet/dotnet_s01/#what-does-the-this-window-show-in-the-debugger","title":"What does the This window show in the debugger?","text":"<p>It points to the object that\u2019s pointed to by this reference. Object\u2019s instance data is shown.</p>"},{"location":"archived/dotnet/dotnet_s01/#what-does-assert-do","title":"What does <code>assert()</code> do?","text":"<p>In debug compilation, assert takes in a Boolean condition as a parameter, and shows the error dialog if the condition is false. The program proceeds without any interruption if the condition is true.</p>"},{"location":"archived/dotnet/dotnet_s01/#whats-the-difference-between-the-debug-class-and-trace-class-documentation-looks-the-same","title":"What\u2019s the difference between the Debug class and Trace class? Documentation looks the same.","text":"<p>Use Debug class for debug builds, use Trace class for both debug and release builds.</p>"},{"location":"archived/dotnet/dotnet_s01/#why-are-there-five-tracing-levels-in-systemdiagnosticstraceswitcher","title":"Why are there five tracing levels in System.Diagnostics.TraceSwitcher?","text":"<p>The tracing dumps can be quite verbose and for some applications that are constantly running you run the risk of overloading the machine and the hard drive there. Five levels range from None to Verbose, allowing to fine-tune the tracing activities.</p>"},{"location":"archived/dotnet/dotnet_s01/#where-is-the-output-of-textwritertracelistener-redirected","title":"Where is the output of TextWriterTraceListener redirected?","text":"<p>To the Console or a text file depending on the parameter passed to the constructor.</p>"},{"location":"archived/dotnet/dotnet_s01/#how-do-you-debug-an-aspnet-web-application","title":"How do you debug an ASP.NET Web application?","text":"<p>Attach the aspnet_wp.exe process to the DbgClr debugger.</p>"},{"location":"archived/dotnet/dotnet_s01/#what-are-three-test-cases-you-should-go-through-in-unit-testing","title":"What are three test cases you should go through in unit testing?","text":"<p>Positive test cases (correct data, correct output),  negative test cases (broken or missing data, proper handling),  exception test cases (exceptions are thrown and caught properly).</p>"},{"location":"archived/dotnet/dotnet_s01/#can-you-change-the-value-of-a-variable-while-debugging-a-c-application","title":"Can you change the value of a variable while debugging a C# application?","text":"<p>Yes, if you are debugging via Visual Studio.NET, just go to Immediate window.</p>"},{"location":"archived/dotnet/dotnet_s01/#explain-the-three-services-model-three-tier-application","title":"Explain the three services model (three-tier application).","text":"<p>Presentation (UI), business (logic and underlying code) and data (from storage or other sources).</p>"},{"location":"archived/dotnet/dotnet_s01/#what-are-advantages-and-disadvantages-of-microsoft-provided-data-provider-classes-in-adonet","title":"What are advantages and disadvantages of Microsoft-provided data provider classes in ADO.NET?","text":"<p>SQLServer.NET data provider is high-speed and robust, but requires SQL Server license purchased from Microsoft. OLE-DB.NET is universal for accessing other sources, like Oracle, DB2, Microsoft Access and Informix, but it\u2019s a .NET layer on top of OLE layer, so not the fastest thing in the world. ODBC.NET is a deprecated layer provided for backward compatibility to ODBC engines.</p>"},{"location":"archived/dotnet/dotnet_s01/#whats-the-role-of-the-datareader-class-in-adonet-connections","title":"What\u2019s the role of the DataReader class in ADO.NET connections?","text":"<p>It returns a read-only dataset from the data source when the command is executed.</p>"},{"location":"archived/dotnet/dotnet_s01/#what-is-the-wildcard-character-in-sql-lets-say-you-want-to-query-database-with-like-for-all-employees-whose-name-starts-with-la","title":"What is the wildcard character in SQL? Let\u2019s say you want to query database with LIKE for all employees whose name starts with La.","text":"<p>The wildcard character is %, the proper query with LIKE would involve \u2018La%\u2019.</p>"},{"location":"archived/dotnet/dotnet_s01/#explain-acid-rule-of-thumb-for-transactions","title":"Explain ACID rule of thumb for transactions.","text":"<p>Transaction must be  * Atomic (it is one unit of work and does not dependent on previous and following transactions),  * Consistent (data is either committed or roll back, no \u201cin-between\u201d case where something has been updated and something hasn\u2019t),  * Isolated (no transaction sees the intermediate results of the current transaction),  * Durable (the values persist if the data had been committed even if the system crashes right after).</p>"},{"location":"archived/dotnet/dotnet_s01/#what-connections-does-microsoft-sql-server-support","title":"What connections does Microsoft SQL Server support?","text":"<p>Windows Authentication (via Active Directory) and SQL Server authentication (via Microsoft SQL Server username and passwords).</p>"},{"location":"archived/dotnet/dotnet_s01/#which-one-is-trusted-and-which-one-is-untrusted","title":"Which one is trusted and which one is untrusted?","text":"<p>Windows Authentication is trusted because the username and password are checked with the Active Directory, the SQL Server authentication is untrusted, since SQL Server is the only verifier participating in the transaction.</p>"},{"location":"archived/dotnet/dotnet_s01/#why-would-you-use-untrusted-verificaion","title":"Why would you use untrusted verificaion?","text":"<p>Web Services might use it, as well as non-Windows applications.</p>"},{"location":"archived/dotnet/dotnet_s01/#what-does-the-parameter-initial-catalog-define-inside-connection-string","title":"What does the parameter Initial Catalog define inside Connection String?","text":"<p>The database name to connect to.</p>"},{"location":"archived/dotnet/dotnet_s01/#whats-the-data-provider-name-to-connect-to-access-database","title":"What\u2019s the data provider name to connect to Access database?","text":"<p>Microsoft.Access.</p>"},{"location":"archived/dotnet/dotnet_s01/#what-does-dispose-method-do-with-the-connection-object","title":"What does Dispose method do with the connection object?","text":"<p>Deletes it from the memory.</p>"},{"location":"archived/dotnet/dotnet_s01/#what-is-a-pre-requisite-for-connection-pooling","title":"What is a pre-requisite for connection pooling?","text":"<p>Multiple processes must agree that they will share the same connection, where every parameter is the same, including the security settings.</p>"},{"location":"archived/dotnet/dotnet_s01/#what-is-the-difference-between-a-where-clause-and-a-having-clause","title":"What is the difference between a \"where\" clause and a \"having\" clause?","text":"<p>\"Where\" is a kind of restriction statement. You use where clause to restrict all the data from DB.Where clause is using before result retrieving.  But Having clause is using after retrieving the data.Having clause is a kind of filtering command.</p>"},{"location":"archived/dotnet/dotnet_s01/#what-is-the-basic-form-of-a-sql-statement-to-read-data-out-of-a-table","title":"What is the basic form of a SQL statement to read data out of a table?","text":"<p>The basic form to read data out of table is \u2018SELECT * FROM table_name; \u2018  An answer: \u2018SELECT * FROM table_name WHERE xyz= \u2018whatever\u2019;\u2019 cannot be called basic form because of WHERE clause.</p>"},{"location":"archived/dotnet/dotnet_s01/#what-structure-can-you-implement-for-the-database-to-speed-up-table-reads","title":"What structure can you implement for the database to speed up table reads?","text":"<p>Follow the rules of DB tuning we have to:  1. properly use indexes ( different types of indexes) 1. properly locate different DB objects across different table spaces, files and so on. 1. create a special space (table space) to locate some of the data with special datatype ( for example CLOB, LOB and \u2026)</p>"},{"location":"archived/dotnet/dotnet_s01/#what-are-the-tradeoffs-with-having-indexes","title":"What are the tradeoffs with having indexes?","text":"<p>Faster selects, slower updates.  Extra storage space to store indexes.  Updates are slower because in addition to updating the table you have to update the index.</p>"},{"location":"archived/dotnet/dotnet_s01/#what-is-a-join","title":"What is a \"join\"?","text":"<p>\u2018join\u2019 used to connect two or more tables logically with or without common field.</p>"},{"location":"archived/dotnet/dotnet_s01/#what-is-normalization-denormalization-why-do-you-sometimes-want-to-denormalize","title":"What is \"normalization\"? \"Denormalization\"? Why do you sometimes want to denormalize?","text":"<p>Normalizing data means eliminating redundant information from a table and organizing the data so that future changes to the table are easier.  Denormalization means allowing redundancy in a table. The main benefit of denormalization is improved performance with simplified data retrieval and manipulation. This is done by reduction in the number of joins needed for data processing.</p>"},{"location":"archived/dotnet/dotnet_s01/#what-is-a-constraint","title":"What is a \"constraint\"?","text":"<p>A constraint allows you to apply simple referential integrity checks to a table.  There are four primary types of constraints that are currently supported by SQL Server:  * PRIMARY/UNIQUE - enforces uniqueness of a particular table column.  * DEFAULT - specifies a default value for a column in case an insert operation does not provide one.  * FOREIGN KEY - validates that every value in a column exists in a column of another table.  * CHECK - checks that every value stored in a column is in some specified list. Each type of constraint performs a specific type of action.  * Default is not a constraint.  * NOT NULL is one more constraint which does not allow values in the specific column to be null. And also it the only constraint which is not a table level constraint.</p>"},{"location":"archived/dotnet/dotnet_s01/#what-types-of-index-data-structures-can-you-have","title":"What types of index data structures can you have?","text":"<p>An index helps to faster search values in tables. The three most commonly used index-types are: - B-Tree: builds a tree of possible values with a list of row IDs that have the leaf value. Needs a lot of space and is the default index type for most databases. - Bitmap: string of bits for each possible value of the column. Each bit string has one bit for each row. Needs only few space and is very fast.(however, domain of value cannot be large, e.g. SEX(m,f); degree(BS,MS,PHD) - Hash: A hashing algorithm is used to assign a set of characters to represent a text string such as a composite of keys or partial keys, and compresses the underlying data. Takes longer to build and is supported by relatively few databases.</p>"},{"location":"archived/golang/golang_s01/","title":"Environment Setup","text":""},{"location":"archived/golang/golang_s01/#install-golang","title":"Install golang","text":"<p>https://github.com/jenac/playground/blob/master/ubuntu1604/golang-1.10.sh</p>"},{"location":"archived/golang/golang_s01/#set-environment-variables","title":"Set Environment Variables","text":"<pre><code>export GOPATH=/home/lihe/go\nexport PATH=$PATH:$GOPATH/bin\n</code></pre>"},{"location":"archived/golang/golang_s01/#folder-structure","title":"Folder Structure","text":"<pre><code>mkdir -p ~/go\nmkdir -p ~/go/src/github.com/jenac/hello\nmkdir -p ~/go/pkg\nmkdir -p ~/go/bin\n</code></pre>"},{"location":"archived/golang/golang_s01/#install-all-project-dependencies","title":"Install All Project Dependencies","text":"<pre><code>go get ./...\n</code></pre>"},{"location":"archived/golang/golang_s01/#misc-comamnd","title":"Misc comamnd","text":"<pre><code>go get &lt;package name&gt;\ngo build\ngo install\n</code></pre>"},{"location":"archived/kotlin/kotlin_s00/","title":"Programming with Objects","text":""},{"location":"archived/kotlin/kotlin_s00/#interfaces","title":"Interfaces","text":""},{"location":"archived/kotlin/kotlin_s00/#classes-and-interfaces","title":"classes and interfaces","text":"<ul> <li>defined in a similar way to Java</li> <li>public by default <pre><code>interface Signatory {\n    fun sign()\n}\n\nclass Person: Signatory {\n    override fun sign() {}\n}\n</code></pre></li> </ul>"},{"location":"archived/kotlin/kotlin_s00/#classes","title":"Classes","text":""},{"location":"archived/kotlin/kotlin_s00/#primary-constructor","title":"Primary Constructor","text":"<ul> <li>defined in-line</li> <li>no <code>new</code> keyword <pre><code>class Person(val: name: String)\n\nval kevin = Person(\"Kevin\")\n</code></pre></li> </ul>"},{"location":"archived/kotlin/kotlin_s00/#properties","title":"Properties","text":"<ul> <li><code>val</code> is immutable, provides get method</li> <li><code>var</code> is mutable, getters and setters <pre><code>class Person(val name: String, var age: Int)\n</code></pre></li> </ul>"},{"location":"archived/kotlin/kotlin_s00/#open","title":"Open","text":"<ul> <li>classes are final by default(unlike Java). <code>open</code> make it can be derived <pre><code>interface Signatory {\n    fun sign()\n}\n\nopen class Person(val name: String, var age: Int) : Signatory {\n    override fun sign() = println(\"$name aged $age can sign documents\")\n}\n\nclass Student(name: String, age: Int): Person (name, age) {\n\n}\n</code></pre></li> </ul>"},{"location":"archived/kotlin/kotlin_s00/#init","title":"Init","text":"<ul> <li>init block runs after object is constructed <pre><code>open class Person(val name: String, var age:Int) {\n    init() {  }\n}\n</code></pre></li> </ul>"},{"location":"archived/kotlin/kotlin_s00/#secondary-constructors","title":"Secondary Constructors","text":"<ul> <li>can provide more than one constructor <pre><code>open class Person(val name: String, var age: Int){\n    var isMarried: Boolean\n    constructor (name: String, age: Int, isMarried: Boolean): this(name, age) {\n        this.isMarried = isMarried\n    }\n} \n</code></pre></li> <li>no <code>val</code> or <code>var</code> for secondary constructor params.</li> </ul>"},{"location":"archived/kotlin/kotlin_s00/#prefer-default-values","title":"Prefer default values","text":"<ul> <li>only provide more than one constructor if you are deriving from a class that requires it. <pre><code>open class Person(val name: String, var age: Int, var isMarried: Boolean = false) {\n    ...\n}\n</code></pre></li> </ul>"},{"location":"archived/kotlin/kotlin_s00/#companion-objects","title":"Companion Objects","text":""},{"location":"archived/kotlin/kotlin_s00/#no-statics-in-kotlin","title":"No statics in Kotlin","text":"<ul> <li>use the companion object instead <pre><code>class Program {\n    companion object {\n        @JvmStatic //?\n        fun main(val args: Array&lt;String&gt;) {\n\n        }\n    }\n}\n</code></pre></li> <li>The companion objects are singletons within our class definition,  so we can associate data and functionality across all our instances of a class.</li> </ul>"},{"location":"archived/kotlin/kotlin_s00/#properties_1","title":"Properties","text":"<ul> <li>declare member in class</li> </ul>"},{"location":"archived/kotlin/kotlin_s00/#data-classes","title":"Data Classes","text":""},{"location":"archived/kotlin/kotlin_s00/#data-classes_1","title":"Data Classes","text":"<ul> <li>classes only hold data</li> <li><code>data</code> keyword</li> <li>Kotlin provides equals, hashCode, toString (and other) functions <pre><code>data class User(var name: String, var last: String)\n\nclass Person(var first: String, val last: String)\n\nfun main(args: Array&lt;String&gt;) {\n    val tom = User(\"tom\", \"peter\")\n    println(tom)\n    tom.last = \"kk\"\n    tom.name = \"was\"\n    println(tom)\n\n    val p = Person(\"1\", \"2\")\n    println(p)\n    p.first = \"CCC\"\n    //p.last = \"WWW\" //last is readonly\n    println(p)\n\n}\n</code></pre></li> </ul>"},{"location":"archived/kotlin/kotlin_s01/","title":"Starting with Kotlin","text":"<ul> <li>to speed up comile, in <code>build.gradle</code> add the following: <pre><code>kotlin.incremental=true\n</code></pre></li> </ul>"},{"location":"archived/kotlin/kotlin_s01/#kotlin-basics","title":"Kotlin Basics","text":""},{"location":"archived/kotlin/kotlin_s01/#val-and-var","title":"val and var","text":""},{"location":"archived/kotlin/kotlin_s01/#type-inference","title":"Type inference","text":"<ul> <li>compile tries to figure out the type: <pre><code>val someLong = 123456L\n</code></pre></li> </ul>"},{"location":"archived/kotlin/kotlin_s01/#basic-types","title":"Basic Types","text":""},{"location":"archived/kotlin/kotlin_s01/#numbers-long-int-short-byte-double-float","title":"Numbers : Long, Int, Short, Byte, Double, Float","text":"<ul> <li>Bitwise operation: <pre><code>val leftShift = 1 shl 2\nval rightShift = 1 shr 2\nval unsignedRightShift = 1 ushr 2\n\nval and = 1 and 0x00001111\nval or = 1 or 0x00001111\nval xor = 1 xor 0x00001111\nval inv = 1.inv() \n</code></pre></li> </ul>"},{"location":"archived/kotlin/kotlin_s01/#boolean","title":"Boolean","text":""},{"location":"archived/kotlin/kotlin_s01/#chars","title":"Chars","text":""},{"location":"archived/kotlin/kotlin_s01/#strings","title":"Strings","text":""},{"location":"archived/kotlin/kotlin_s01/#arrays","title":"Arrays","text":"<p><pre><code>val array = arrayOf(1,2,3)\nval perfectSquares = Array(10, {k -&gt; k*k}) //size and generator\n</code></pre> * to avoid boxing use: ByteArray, CharArray, ShortArray, IntArray, LongArray, BooleanArray, FloatArray, DoubleArray</p>"},{"location":"archived/kotlin/kotlin_s01/#comments","title":"Comments","text":""},{"location":"archived/kotlin/kotlin_s01/#packages","title":"Packages","text":""},{"location":"archived/kotlin/kotlin_s01/#imports","title":"Imports","text":""},{"location":"archived/kotlin/kotlin_s01/#wildcard-imports","title":"Wildcard Imports","text":""},{"location":"archived/kotlin/kotlin_s01/#import-renaming","title":"Import Renaming","text":"<pre><code>import com.jenac.here as there\n</code></pre>"},{"location":"archived/kotlin/kotlin_s01/#string-templates-interpolation","title":"String templates / interpolation","text":"<pre><code>\"hi, this is ${someVariableValue}\"\n</code></pre>"},{"location":"archived/kotlin/kotlin_s01/#ranges","title":"Ranges","text":"<p><pre><code>val aToZ = \"a\"..\"z\"\nval isTure = \"c\" in aToZ\nval oneToNine = 1..9\nval isFalse = 11 in oneToNine\n</code></pre> * downTo(), rangeTo() <pre><code>val countingDown = 100.downTo(2)\nval rangeTo = 10.rangeTo(20)\n</code></pre></p> <ul> <li> <p>step() <pre><code>val oneToFifty = 1..50\nval oddNumbers = oneToFifty.step(2)\n</code></pre></p> </li> <li> <p>reversed() <pre><code>val countingDownEvenNumbers = (2..100).step(2).reversed()\n</code></pre></p> </li> </ul>"},{"location":"archived/kotlin/kotlin_s01/#loops","title":"Loops","text":"<ul> <li> <p>while <pre><code>while(true) {\n    ...\n}\n</code></pre></p> </li> <li> <p>for <pre><code>val list = listOf(1, 2, 3, 4)\nfor (k in list) {\n    ...\n}\n\nval set = setOf(1,2)\nfor (s in set) {\n    ...\n}\n\nfor (a in 1..50) {\n    ...\n}\n</code></pre></p> </li> <li>ranges are handled by index for better performance</li> <li>for works on any iterable</li> <li>Array can also use indices extension <pre><code>for (index in array.indices) {\n    println(\"element $index is ${array[index]})\")\n}\n</code></pre></li> </ul>"},{"location":"archived/kotlin/kotlin_s01/#exception-handling","title":"Exception Handling","text":"<ul> <li>all exceptions in kotlin is unchecked</li> </ul>"},{"location":"archived/kotlin/kotlin_s01/#instantiating-classes","title":"Instantiating Classes","text":"<ul> <li>no <code>new</code> key word <pre><code>val file = File(\"someFolder/someFile\")\n</code></pre></li> </ul>"},{"location":"archived/kotlin/kotlin_s01/#referential-equality-and-structual-equality","title":"Referential equality and Structual equality","text":"<ul> <li>referential equality: use <code>===</code> or <code>!==</code></li> <li>structual equality: use <code>==</code> or <code>!=</code></li> </ul>"},{"location":"archived/kotlin/kotlin_s01/#this-expression","title":"This expression","text":"<ul> <li>In member of class, <code>this</code> refers to the class instance</li> <li>In extensions,   <code>this</code> refers to the instance that extension function was applied to: <pre><code>class C {\n    ...\n}\n\nfun C?.toString() {\n    if (this == null) return \"null\"\n    return \"the actual value\"\n}\n</code></pre></li> </ul>"},{"location":"archived/kotlin/kotlin_s01/#scope","title":"Scope","text":"<ul> <li>label <pre><code>class Building (val address: String) {\n    inner class Reception(telephone: String) {\n        fun printAddress() = println(this@Building.address)\n    }\n}\n</code></pre></li> </ul>"},{"location":"archived/kotlin/kotlin_s01/#visibility-modifiers","title":"Visibility modifiers","text":""},{"location":"archived/kotlin/kotlin_s01/#private","title":"private","text":"<ul> <li>private top level function, class, interface only visible within the same file</li> <li>in class, only visible within the class</li> </ul>"},{"location":"archived/kotlin/kotlin_s01/#protected","title":"protected","text":"<ul> <li>not allowed for top level</li> </ul>"},{"location":"archived/kotlin/kotlin_s01/#internal","title":"internal","text":"<ul> <li>visible in same module</li> </ul>"},{"location":"archived/kotlin/kotlin_s01/#control-flow-as-expression","title":"Control flow as expression","text":"<ul> <li>expression vs statement: expression is evaluable, statement is not</li> <li><code>if...else</code> and <code>try...catch</code> are expressions <pre><code>val date = Date()\nval today = if (date.year == 2018) true else false\n\nfun isZero(x: Int): Boolean {\n    return if (x==0) true else false\n}\n\nval success = try {\n    readFile()\n    true\n} catch (e: IOException) {\n    false\n}\n</code></pre> when use <code>if</code> as expression, must have <code>else</code> to cover all the cases</li> </ul>"},{"location":"archived/kotlin/kotlin_s01/#null-syntax","title":"Null syntax","text":"<ul> <li>nullable must explicit: <pre><code>val s:String? = null //ok\nval s:String = null //compile error\n</code></pre></li> <li><code>is</code> for type checking: <pre><code>fun isString(any: Any): Boolean {\n    return if (any is String) true else false\n}\n</code></pre></li> </ul>"},{"location":"archived/kotlin/kotlin_s01/#smart-cast","title":"smart cast","text":"<ul> <li>compiler is intelligent to figure out type: <pre><code>//when check length, compiler can tell any is String \nfun isEmptyString(any: Any): Boolean {\n    return any is String &amp;&amp; any.length == 0\n}\n\nfun isNotStringOrEmpty(any: Any): Boolean {\n    return any !is String || any.length == 0\n}\n</code></pre></li> </ul>"},{"location":"archived/kotlin/kotlin_s01/#explicit-casting","title":"explicit casting","text":"<ul> <li><code>as</code> <pre><code>val s = any as String\n</code></pre></li> <li>if cannot cast, <code>ClassCastException</code> will be thrown</li> <li>if want return null when cannot cast, declare with nullable: <pre><code>val any = \"someFolder/someFile\"\nval string: String? = any as String //ok, success cast\nval file: File? = any as File //ok, file is null now.\n</code></pre></li> </ul>"},{"location":"archived/kotlin/kotlin_s01/#when-expression","title":"When expression","text":""},{"location":"archived/kotlin/kotlin_s01/#when-value","title":"when (value)","text":"<ul> <li>like <code>switch</code> in Java <pre><code>fun what(x: Int) {\n    when(x) {\n        0 -&gt; println(\"zero\")\n        1 -&gt; println(\"one\")\n        else -&gt; println(\"ok\")\n    }\n}\n</code></pre> when must cover all the cases, use <code>else</code> or make sure all cases are covered.</li> <li> <p>use as an expression <pre><code>fun isMinOrMax(x: Int): Boolean {\n    val isIt = when (x) {\n        Int.MAX_VALUE -&gt; true\n        Int.MIN_VALUE -&gt; true\n        else -&gt; false\n    }\n    return isIt\n}\n\n//this is better\nfun isZeroOrOne(x: Int): Boolean {\n    return when(x) {\n        0, 1 -&gt; true\n        else -&gt; false\n    }\n}\n</code></pre></p> </li> <li> <p>use function as a case <pre><code>fun isAbs(x: Int): Boolean {\n    return when(x) {\n        Math.abs(x) -&gt; true\n        else -&gt; false\n    }\n}\n</code></pre></p> </li> <li> <p>use range <pre><code>fun isSingleDigit(x: Int): Boolean {\n    return when(x) {\n        in -9..9 -&gt; true\n        else -&gt; false\n    }\n}\n</code></pre></p> </li> <li> <p>in list <pre><code>fun isDieNumber(x: Int): Boolean {\n    return when(x) {\n        in lisfOf(1,2,3,4,5,6) -&gt; true\n        else -&gt; false\n    }\n}\n</code></pre></p> </li> <li> <p>type checking <pre><code>fun startsWithFoo(any: Any): Boolean {\n    return when(any) {\n        is String -&gt; any.startsWith(\"Foo\")\n        else -&gt; false\n    }\n}\n</code></pre></p> </li> </ul>"},{"location":"archived/kotlin/kotlin_s01/#when-without-argument","title":"when without argument","text":"<ul> <li><code>if ... else</code> like style <pre><code>fun whenWithoutArgs(x: Int, y: Int) {\n    when {\n        x&lt;y -&gt; println (\"x is less than y\")\n        x&gt;y -&gt; println (\"x is greater than y\")\n        else -&gt; println (\"x == y\")\n    }\n}\n</code></pre></li> </ul>"},{"location":"archived/kotlin/kotlin_s01/#function-return","title":"Function return","text":"<ul> <li> <p>By default, <code>return</code> returns from the nearest enclosing function or anonymous function. <pre><code>fun printLessThanTwo() {\n    val list = listOf(1,2,3,4)\n    list.forEach{ fun(x) {\n        if (x&lt;2) println(x)\n        else return //just return the internal function\n        }\n        println(\"this line still prints for 3 and 4\")\n    }\n}\n</code></pre></p> </li> <li> <p>use label to return outside function <pre><code>fun printUntilStop() {\n    val list = listOf(\"a\", \"b\", \"stop\", \"c\")\n    list.forEach {\n        if (it == \"stop\") return @forEach\n        else println(it)\n    }\n}\n</code></pre></p> </li> </ul>"},{"location":"archived/kotlin/kotlin_s01/#type-hierarchy","title":"Type hierarchy","text":"<ul> <li> <p><code>Any</code> is like <code>Object</code> in Java, it is base class for all others types. It defines <code>toString</code>, <code>hashCode</code>, <code>equals</code>, <code>apply</code>, <code>let</code>, <code>to</code>.</p> </li> <li> <p><code>Unit</code> like <code>void</code>, but it is a singleton</p> </li> <li> <p><code>Nothing</code> is subclass for all other types</p> </li> </ul>"},{"location":"archived/kotlin/kotlin_s02/","title":"OOP in Kotlin","text":""},{"location":"archived/kotlin/kotlin_s02/#classes","title":"Classes","text":"<ul> <li>By default empty constructor will be generated <pre><code>class Deposit { }\n</code></pre></li> <li>Primary constructor <pre><code>class Person(val name: String, val age: Int) { }\n</code></pre></li> <li>unless you want, no <code>constructor</code> keyword needed, the follwing case you need it: <pre><code>class Database internal constructor(connection: Connection) { } //internal constructor\n</code></pre></li> <li>construction code placed in <code>init</code> method: <pre><code>class Persion(val name: String, val age: Int?) {\n    init {\n        require(name.trim().length &gt; 0) {\"invalid name\"}\n        //require will throw illegalArgumentException, if the expression is false\n        if (age !=null ) {\n            require(age &gt; 0 &amp;&amp; age &lt; 150) {\"invalid age\"}\n        }\n    }\n}\n\n//name, age are properties\n//var: read/write\n//val: readonly \n</code></pre></li> <li>if no <code>var</code> or <code>val</code> in constructor argument, no property generated: <pre><code>class Person2(firstName: String, lastName: String, howOld: Int?) {\n    private val name: String\n    private val age: Int?\n    init {\n        this.name = \"$firstName, $lastName\"\n        this.age = howOld\n    }\n\n    fun getName(): String = this.name\n    fun getAge(): Int? = this.age\n}\n</code></pre></li> </ul>"},{"location":"archived/kotlin/kotlin_s02/#access-levels","title":"Access Levels","text":"<ul> <li>internal: within module</li> <li>private: within file or same class</li> <li>protected: sub classes</li> </ul>"},{"location":"archived/kotlin/kotlin_s02/#nested-classes","title":"Nested Classes","text":"<ul> <li>keyword <code>inner</code> make nested class private</li> </ul>"},{"location":"archived/kotlin/kotlin_s02/#data-classes","title":"Data Classes","text":"<ul> <li>simlimar to POJO, simply hold data</li> <li>when use with JPA, use gradle plug in <code>kotlin-jpa</code> to generate default construct</li> </ul>"},{"location":"archived/kotlin/kotlin_s02/#enum-classes","title":"Enum Classes","text":"<ul> <li>simple  <pre><code>enum class Day { MON, TUE, WED, THU, FRI, SAT, SUN }\n</code></pre></li> <li>with data <pre><code>enum class Planet(val mass: Double, val radius: Double) {\n    MECURY(3.3+e23, 2.4e6),\n    EARTH(5.97+e24, 6.3e6)\n}\nPlanet.valueOf(\"EARTH\") //String to enum\nPlanet.values() //list all values\n</code></pre></li> <li>implement interface <pre><code>interface Printable {\n    fun print(): Uint\n}\n\npublic enum class Word: Printable {\n    HELLO {\n        override fun print() {\n            ...\n        }\n    },\n    BYE {\n        override fun print() {\n            ...\n        }\n    }\n\n}\n</code></pre></li> </ul>"},{"location":"archived/kotlin/kotlin_s02/#static-methods-and-companion-object","title":"Static methods and companion object","text":"<ul> <li>no <code>static</code> keyword in kotlin</li> <li>top level / package level function compiles to static method with a final class which compiled from the kotlin file</li> <li>top level / package level object compiles to static class instance, its method compiles to static method.</li> <li>companion object: class + top level object</li> </ul>"},{"location":"archived/kotlin/kotlin_s02/#interfaces","title":"Interfaces","text":"<pre><code>interface Doc {\n    //properties\n    val version: String\n    val size: Long\n    val name: String\n    get() = \"No Name\" //default implementation\n    fun save(input: InputStream)\n    fun getDescription(): String {\n        return \"simple doc\";\n    } //default implementation\n}\n</code></pre>"},{"location":"archived/kotlin/kotlin_s02/#inherientance","title":"Inherientance","text":"<ul> <li><code>open</code> keyword means allwo to derive, by default is open</li> <li>only inherient from one class, but multple interfaces</li> <li>no need to list class first <pre><code>class C: IA, B, ID { }\n//IA, ID interfaces\n//B, class\n</code></pre></li> </ul>"},{"location":"archived/kotlin/kotlin_s02/#visibility-modifiers","title":"Visibility modifiers","text":""},{"location":"archived/kotlin/kotlin_s02/#abstract-classes","title":"Abstract classes","text":""},{"location":"archived/kotlin/kotlin_s02/#polymorphism","title":"Polymorphism","text":"<ul> <li>implicit <code>open</code></li> <li>explicit <code>override</code></li> <li>can override property: <pre><code>open class Base {\n    open val prop1: String\n    get() = \"Base::value\"\n}\n\nclass Derived: Base() {\n    override val prop1: String\n    get() = \"Derived::value\"\n}\n\nclass Another(override val prop1: String): Base() { }\n</code></pre></li> <li>can override <code>val</code> to <code>var</code>, but not the reverse way.</li> </ul>"},{"location":"archived/kotlin/kotlin_s02/#inheritance-vs-composition","title":"Inheritance vs composition","text":""},{"location":"archived/kotlin/kotlin_s02/#class-delegation","title":"Class delegation","text":""},{"location":"archived/kotlin/kotlin_s02/#sealed-classes","title":"Sealed classes","text":"<ul> <li>sealed class in kotlin is an abstract class, which can be extended by subclasses defined as nested classes within the sealed class itself. <pre><code>sealed class IntBinaryTree {\n    class EmptyNode: IntBinaryTree()\n    class IntBinaryTreeNode(val ...) {\n\n    }\n}\n\n//usage:\nval tree = IntBinaryTree.IntBinaryTreeNode(...)\n</code></pre></li> </ul>"},{"location":"archived/linux/linux_s01/","title":"Ubuntu 16.04 no wifi at start up issue","text":""},{"location":"archived/linux/linux_s01/#solution","title":"Solution","text":"<p><pre><code>sudo nano /etc/systemd/system/wifi-resume.service\n</code></pre> put the following as file content: <pre><code>[Unit]\nDescription=Restart networkmanager at resume\nAfter=suspend.target\nAfter=hibernate.target\nAfter=hybrid-sleep.target\n\n[Service]\nType=oneshot\nExecStart=/bin/systemctl restart network-manager.service\n\n[Install]\nWantedBy=suspend.target\nWantedBy=hibernate.target\nWantedBy=hybrid-sleep.target\n</code></pre> enable the service <pre><code>sudo systemctl enable wifi-resume.service\n</code></pre></p>"},{"location":"archived/linux/linux_s02/","title":"Systemd to start docker containers at startup","text":"<p>create ci service <pre><code>sudo nano /lib/systemd/system/ci.service \n</code></pre> put the following: <pre><code>[Unit]\nDescription=Start CI dockers at startup\nDocumentation=see wiki\nAfter=docker.service\nRequires=docker.service\n\n[Service]\nExecStart=/usr/local/bin/docker-compose --file /home/lihe/dockers/ci-docker-compose.yml up -d\nExecStop=/usr/local/bin/docker-compose --file /home/lihe/dockers/ci-docker-compose.yml stop\n#ExecStart=/usr/bin/docker start xxxxx\n#ExecStop=/usr/bin/docker stop xxxx\nRemainAfterExit=yes\n\n[Install]\nWantedBy=multi-user.target\n</code></pre> enable the service: <pre><code>sudo systemctl enable ci.service\nsudo systemctl daemon-reload &amp;&amp; sudo service ci restart\n</code></pre></p>"},{"location":"archived/linux/linux_s03/","title":"Allow insecure registry for docker on Ubuntu","text":"<p><pre><code>sudo nano /lib/systemd/system/docker.service\n</code></pre> find the following and add: <code>--insecure-registry Registry:5000</code>, like this: <pre><code>ExecStart=/usr/bin/dockerd --insecure-registry Registry:5000 -H fd://\n</code></pre> Restart docker <pre><code>sudo systemctl daemon-reload &amp;&amp; sudo service docker restart\n</code></pre></p>"},{"location":"archived/python/python_s00/","title":"Python 3","text":""},{"location":"archived/python/python_s00/#basic","title":"Basic","text":"<ul> <li> <p>divide 4/3</p> </li> <li> <p>integer divide 4//3</p> </li> <li> <p>power 4**3</p> </li> <li> <p>mod 4%3</p> </li> <li> <p>string repeat 'abc ' * 3</p> </li> </ul> <p><code>'abc abc abc '</code></p> <ul> <li>esacpe \\</li> </ul>"},{"location":"archived/python/python_s00/#string","title":"String","text":"<ul> <li> <p>string index from 0, back index starts with -1 'abc'[0] <code>'a'</code> 'abc'[-1] <code>'c'</code></p> </li> <li> <p>range using <code>:</code> 'abc'[1:4] <code>'bc'</code> 'abc123'[1:4] <code>'bc1'</code> 'abc123'[1:] <code>'bc123'</code> 'abc123'[:4] <code>'abc1'</code> 'abc123'[:] <code>'abc123'</code></p> </li> <li> <p>get string length len('1234') <code>4</code></p> </li> <li> <p>clear screen <pre><code>import os\nos.system('clear')\n</code></pre></p> </li> </ul>"},{"location":"archived/python/python_s00/#list","title":"List","text":"<ul> <li>add [1,2,3] + ['four', 'five', 'six'] <code>[1, 2, 3, 'four', 'five', 'six']</code></li> <li>append</li> <li>range also works</li> <li>can assign value using range Empty a list: <code>someList[:]=[]</code></li> </ul>"},{"location":"archived/python/python_s00/#if","title":"if","text":"<ul> <li>examples <pre><code>age = 18\nif age &lt; 3:\n    print('milk')\n    print('water')\nelif age &lt; 21:\n    print('g2')\nelse:\n    print('beer')\n\nname = 'batman'\nif name is 'superman':\n    print('S')\nelif name is 'batman':\n    print('B')\nelse:\n    print('unknown')\n</code></pre></li> </ul>"},{"location":"archived/python/python_s00/#for","title":"for","text":"<pre><code>foods = ['pizza', 'wendy\\'s', 'tuna', 'beer', 'somalica']\n\n//for f in foods[:3]:\nfor f in foods:\n    print(f)\n    print(len(f))\nprint('--------------')\nprint(f)\n</code></pre>"},{"location":"archived/python/python_s00/#range","title":"range","text":"<p><pre><code>for x in range(10):\n    print(x)\n</code></pre> print 0 to 9</p> <p>range(start, end, step) <pre><code>for x in range(30, 40, 2):\n    print(x)\n</code></pre> prints: 30, 32, 34, 36, 38</p>"},{"location":"archived/python/python_s00/#while","title":"while","text":"<pre><code>age = 5\nwhile age &lt; 15:\n    print(age)\n    age += 1\n</code></pre>"},{"location":"archived/python/python_s00/#comment","title":"Comment","text":"<p>single line: <pre><code># this is comment\n</code></pre> multiple line <pre><code>'''\nthis is multiple\nline comment\n'''\n</code></pre></p>"},{"location":"archived/python/python_s00/#print-concatenation","title":"print concatenation","text":"<p><pre><code>print(10, 12, 'my age is:' , 9, 100, 'what')\n</code></pre> prints:10 12 my age is: 9 100 what</p>"},{"location":"archived/python/python_s00/#break","title":"<code>break</code>","text":""},{"location":"archived/python/python_s00/#continue","title":"<code>continue</code>","text":"<pre><code>numbersTaken = [2, 5, 7, 9, 12, 15, 17]\nfor n in range(1, 20):\n    if n in numbersTaken:\n        continue\n    print(n)\n</code></pre>"},{"location":"archived/python/python_s00/#functions","title":"Functions","text":"<p><pre><code>#define function\ndef functionBeef():\n    print('beef started')\n    print('beef working')\n    print('beef end')\n\n#call the function\nfunctionBeef()\n</code></pre> <pre><code>#returns a list\ndef bitcoin_to_usd(btc):\n    amount = btc * 200\n    print(amount)\n    return [btc, amount]\n\nbitcoin_to_usd(2.5)\n</code></pre></p>"},{"location":"archived/python/python_s00/#default-parameter-value","title":"default parameter value","text":"<pre><code>def get_gender(sex = 'unkown'):\n    ...\n</code></pre>"},{"location":"archived/python/python_s00/#variable-scope","title":"variable scope","text":"<p>same as other language</p>"},{"location":"archived/python/python_s00/#keyword-arguments-aka-named-parameters","title":"keyword arguments aka named parameters","text":"<pre><code>def sayhello(system='linux', action='say', word='hello') :\n    print(system, action, word)\n\nsayhello()\nsayhello(action='print')\nsayhello( word='good bye', system='windows')\n</code></pre>"},{"location":"archived/python/python_s00/#packed-arguments-like-arg_list-in-c","title":"packed arguments like arg_list in C++","text":"<p><pre><code>def print_numbers(*numbers):\n    for n in numbers:\n        print(n)\n\nprint_numbers()\nprint_numbers(1)\nprint_numbers(1, 2, 3, 5)\nprint_numbers([2,3,5,6,7]) #this will print [2, 3, 5, 6, 7]\n</code></pre> to pack dictionary use ** <pre><code># A Python program to demonstrate packing of\n# dictionary items using **\ndef fun(**kwargs):\n    # kwargs is a dict\n    print(type(kwargs))\n\n    # Printing dictionary items\n    for key in kwargs:\n        print(\"%s = %s\" % (key, kwargs[key]))\n\n\n# Driver code\nfun(name=\"geeks\", ID=\"101\", language=\"Python\")\n</code></pre></p>"},{"location":"archived/python/python_s00/#unpack-arguments","title":"unpack arguments","text":"<pre><code>def health_calculator(age, apples_ate, cigs_smoked):\n  answer = (100-age) + (apples_ate*3.5) - (cigs_smoked*2)\n  print(answer)\n\nbuckys_data = [27, 20, 0]\n\nhealth_calculator(buckys_data[0], buckys_data[1], buckys_data[2])\nhealth_calculator(*buckys_data) #using unpacking arguments\n</code></pre>"},{"location":"archived/python/python_s00/#sets","title":"sets","text":"<p>no duplicate <pre><code>groceries = {'pizza', 'candy', 'coke', 'banana', 'coke'}\nprint(groceries) #only 1 coke printed. duplicate coke removed\n\n#check exist\nprint('pizza' in groceries)\nprint('apple' in groceries)\n</code></pre></p>"},{"location":"archived/python/python_s00/#dictionary","title":"dictionary","text":"<pre><code>classmates = {'Tony': ' cool but smells', 'Emma': ' sits behind me', 'Lucy': ' asks too many questions'}\n\nprint(classmates['Emma'])\n\nclassmates['Emma'] = ' what if?'\nfor k, v in classmates.items():\n    print(k + ':' + v)\n</code></pre>"},{"location":"archived/python/python_s00/#modules","title":"modules","text":"<pre><code>import random \nprint(random.randrange(0, 100))\n</code></pre>"},{"location":"archived/python/python_s00/#download-image-from-web","title":"download image from web","text":"<pre><code>import urllib.request\nurllib.request.urlretrieve(url, filename)\n</code></pre>"},{"location":"archived/python/python_s00/#read-and-write-files","title":"read and write files","text":"<ul> <li>write file <pre><code>fw = open('sample.txt', 'w')\nfw.write('some lines in file\\n')\nfw.write('some lines 2 in file\\n')\nfw.close()\n</code></pre></li> <li>read file <pre><code>fr = open('sample.txt', 'r')\ntext = fr.read()\nprint(text)\nfr.close()\n</code></pre></li> </ul>"},{"location":"archived/python/python_s00/#some-notes","title":"some notes","text":"<pre><code>request.urlopen(url)\ncsv_str.split(\"\\\\n\")\n#raw string\nfile = r'C:\\hello\\this.txt'\n</code></pre>"},{"location":"archived/python/python_s00/#exception","title":"exception","text":"<pre><code>try:\n    number = int(input(\"what is your number?\\n\"))\n    print(18/number)\nexcept ValueError:\n    print(\"please input a number\")\nexcept ZeroDivisionError:\n    print(\"no zero allow\")\nexcept:\n    print(\"all other exception goes here.\")\nfinally:\n    print(\"always go here\")\n</code></pre>"},{"location":"archived/python/python_s00/#classes-and-objects","title":"classes and objects","text":"<pre><code>class User:\n    first = '1'\n    last = 'b'\n\n    def printFullName(self):\n        print(self.first + '.' + self.last)\n\n\nu = User()\nu.printFullName()\n\nu2 = User()\nu2.first = '2'\nu2.last = 'c'\nu2.printFullName()\n</code></pre>"},{"location":"archived/python/python_s00/#init-like-construct","title":"init (like construct)","text":"<pre><code>class Tuna:\n    def __init__(self):\n        #some implementation here\n</code></pre>"},{"location":"archived/python/python_s00/#class-variable-vs-instance-variable","title":"class variable vs instance variable","text":"<pre><code>class Girl:\n    gender = 'female' #class variable, like C# static member, shared by all class instance.\n\n    def __init__(self, the_name):\n        self.name = the_name #name is the instance variable. Like member variable in C#\n\nr  = Girl('Rachel')\nprint(r.name)\nprint(r.gender)\n</code></pre>"},{"location":"archived/python/python_s00/#inheritance","title":"inheritance","text":"<pre><code>class Parent():\n    def print_last_name:\n        pass\n        #some implementation\n    def print_awsome:\n        pass\n        #some other implementation\n\nclass Child(Parent): #inherit from parent\n    def print_first_name:\n        #bbbbb\n    def print_awsome:\n        #override the parent method\n</code></pre>"},{"location":"archived/python/python_s00/#multiple-inheritance-are-supported","title":"multiple inheritance are supported","text":"<pre><code>pass\n#used for empty implementation\n</code></pre>"},{"location":"archived/python/python_s00/#threading","title":"threading","text":""},{"location":"archived/python/python_s01/","title":"Course and books","text":"<ul> <li>Python fundamentals - the python apprentice</li> <li>Python beyond the basics - the python jorneyman</li> <li>Advance Python - the python master</li> </ul>"},{"location":"archived/python/python_s01/#getting-starting-with-python3","title":"Getting starting with python3","text":"<ul> <li>REPL</li> <li><code>_</code> means last result</li> </ul>"},{"location":"archived/python/python_s01/#significant-white-spaces-rules","title":"Significant white spaces rules","text":"<ul> <li>Prefer 4 spaces</li> <li>Never mix space and tab</li> <li>Be consistent on consecutive lines</li> <li>Only deviate to improve readability</li> </ul>"},{"location":"archived/python/python_s01/#python-standard-library","title":"Python standard library","text":"<pre><code>import math\nmath.sqrt(81)\n\nhelp()\nhelp(math)\nhelp(math.factorial)\n\nfrom math import sqrt\nsqrt(49)\n\nfrom math import sqrt as sq\nsq(16)\n</code></pre> <ul> <li><code>//</code> divide into int</li> <li><code>/</code> divide into float</li> </ul>"},{"location":"archived/python/python_s01/#scalar-types-and-values","title":"Scalar types and values","text":""},{"location":"archived/python/python_s01/#int","title":"int","text":"<pre><code>0b10 # 2\n0o10 # 8\n0x10 # 16\nint(3.5) # 3\nint(\"489\") # 489\nint(\"10000\", 3) # 81, 3 is the base\n</code></pre>"},{"location":"archived/python/python_s01/#float","title":"float","text":"<ul> <li><code>3e8</code> // 3 x 10<sup>8</sup> </li> <li><code>1.616e-35</code> // 1.616 x 10<sup>-35</sup></li> <li><code>float(\"1.618\")</code> // 1.618</li> <li><code>float(\"inf\")</code> // infinity: inf</li> </ul>"},{"location":"archived/python/python_s01/#none","title":"None","text":"<pre><code>a = None\na is None 'True\n</code></pre>"},{"location":"archived/python/python_s01/#bool","title":"bool","text":"<ul> <li><code>True</code> or <code>False</code></li> <li><code>bool(0)</code> is <code>False</code></li> <li><code>bool([])</code> is <code>False</code></li> <li><code>bool(\"\")</code> is <code>False</code></li> </ul>"},{"location":"archived/python/python_s01/#condition-statement","title":"Condition statement","text":"<pre><code>if expr:\n    print(\"OK\")\n# empty line is reqired in REPL\n\nif expr:\n    doSomething\nelse\n    doSomeOther\n\n\nif expr:\n    some...\nelif\n    some...\nelse\n    some...\n</code></pre>"},{"location":"archived/python/python_s01/#while-loops","title":"While loops","text":"<pre><code>while expr:\n    print\n    c-=1\n\n\nwhile True:\n    if expr:\n        break\n</code></pre>"},{"location":"archived/python/python_s02/","title":"Strings and Collections","text":""},{"location":"archived/python/python_s02/#collections","title":"Collections","text":"<ul> <li>str</li> <li>bytes</li> <li>list</li> <li>dict</li> </ul>"},{"location":"archived/python/python_s02/#str","title":"str","text":"<ul> <li>immutable sequence of unicode code points (chars)</li> <li>string literal <pre><code>'hello world'\n\n\"hello world\"\n\n\"\"\"this is \na multi-line\nstring\"\"\"\n\nr\"c:\\users\\lchen\" #raw string, no need to escape \\\nstr(123) # \"123\"\n</code></pre></li> </ul>"},{"location":"archived/python/python_s02/#bytes","title":"bytes","text":"<ul> <li>immutable sequence of bytes</li> <li>bytes literal <pre><code>b'hello world'\nb\"hello world\"\n...\n</code></pre></li> </ul>"},{"location":"archived/python/python_s02/#list","title":"list","text":"<ul> <li>mutable sequence of objects</li> <li>list literal <pre><code>[1, 2, 3]\n[\"1\", \"two\", 3, 4.0]\n</code></pre></li> </ul>"},{"location":"archived/python/python_s02/#dict","title":"dict","text":"<ul> <li>mutable mappings of key/value pairs</li> <li>dict literal <pre><code>{ k1: val1, k2: val2 }\n{} # empty dict\n</code></pre></li> </ul>"},{"location":"archived/python/python_s02/#for-loop","title":"For Loop","text":"<ul> <li>for item in interable: <pre><code>colors = ['red': 0xFF0000, 'green': 0x00FF00, 'blue': 0x0000FF]\nfor color in colors:\n    print(color, colors[color])\n</code></pre></li> </ul>"},{"location":"archived/python/python_s02/#modularity","title":"Modularity","text":"<ul> <li>python code placed in *.py file called module</li> <li>modules can be executed directly: <code>python module_name.py</code></li> <li>import to REPL <code>import module_name</code></li> <li>named function <code>def function_name(arg1, argn):</code></li> <li>return value using <code>return</code></li> <li>no return value then returns <code>None</code></li> <li>use <code>__name__</code> to determine how the module is being used <pre><code>if __name__ == \"__main__\":\n</code></pre></li> <li>command args: <code>sys.arv</code>, script file name is <code>sys.argv[0]</code></li> <li>docstring \"\"\" .... bla bla .... \"\"\" for <code>help()</code></li> </ul>"},{"location":"archived/react/learning_react_s01/","title":"Emerging Javascript","text":""},{"location":"archived/react/learning_react_s01/#declare-variables-in-es6","title":"Declare variables in ES6","text":"<ul> <li><code>const</code></li> <li><code>let</code></li> <li>Template strings aka interpolation</li> <li>Default parameters</li> <li>Arrow functions</li> </ul>"},{"location":"archived/react/learning_react_s01/#es6-objects-and-arrays","title":"ES6 Objects and Arrays","text":""},{"location":"archived/react/learning_react_s01/#destructuring-assignment","title":"Destructuring Assignment","text":"<ul> <li> <p>General <pre><code>var sandwitch = {\n  bread: \"dutch crunch\",\n  meat: \"tuna\",\n  cheese: \"swiss\",\n  topping: [\"lettuce\", \"tomato\", \"mustad\"]\n}\n\nvar {bread, meat} = sandwitch\nconsole.log(bread, meat) //dutch crunch tuna\n\nbread = \"garlic\"\nmeat = \"turkey\"\nconsole.log(bread) //gralic\nconsole.log(meat) //turkey\nconsole.log(sandwitch.bread, sandwitch.meat) //dutch crunch tuna\n</code></pre></p> </li> <li> <p>On function argument <pre><code>var regularPerson = { firstname: \"Bill\", lastname: \"Willson\" }\nvar lordifyOld = regularPerson =&gt; {\n  console.log(`${regularPerson.firstname} of Canterbury`)\n}\nlordifyOld(regularPerson) //Bill of Canterbury\n\nvar logdifyNew = ({firstname}) =&gt; {\n  console.log(`${firstname} of Canterbury`)\n}\nlordifyNew(regularPerson) //Bill of Canterbury\n</code></pre></p> </li> <li> <p>On array <pre><code>var [firstResort] = [\"Kirkwood\", \"Squaw\", \"Alpine\"]\nconst.log(firstrResort) //Kirkwood\n\n//pass unnessary elements\nvar [, , thirdResort] = [\"Kirkwood\", \"Squaw\", \"Alpine\"]\nconsole.log(thirdResort) //Alpine\n</code></pre></p> </li> </ul>"},{"location":"archived/react/learning_react_s01/#object-literal-enhancement","title":"Object Literal Enhancement","text":"<ul> <li> <p>Kind of reverse against destrucuring. <pre><code>var name = \"Tallac\"\nvar elevation = 9738\n\nvar funHike = [name, elevation]\nconsole.log(funHike) // { name: \"Tallac\", elevation: 9738 }\n\nvar print = function() {\n  console.log(`Mt ${this.name} is ${this.elevation} feet tall`)\n}\n\nvar funHike2 = [name, elevation, print]\nfunHike2.print() //Mt Tallac is 9738 feet tall\n</code></pre></p> </li> <li> <p>Old vs new syntax <pre><code>//old\nvar skier = {\n  name: name,\n  sound: sound,\n  powerYell: function() {\n    ...\n  },\n  speed: function(mph) {\n    ...\n  }\n}\n\n//new\nvar skier = {\n  name,\n  sound,\n  powerYell() {\n    ...\n  },\n  speed(mph) {\n    ...\n  }\n}\n</code></pre></p> </li> </ul>"},{"location":"archived/react/learning_react_s01/#the-spread-operator","title":"The spread operator","text":"<ul> <li> <p>Spread arrays <pre><code>var peaks= [\"Tallac\", \"Ralston\", \"Rose\"]\nvar canyons = [\"Ward\", \"Blackwood\"]\nvar tahoe = [...peaks, ...canyons]\nconsole.log(tahoe.join(\", \")) //Tallac, Ralston, Rose, Ward, Blackwood\n</code></pre></p> </li> <li> <p>Spread does COPY <pre><code>var peaks = [\"Tallac\", \"Ralston\", \"Rose\"]\nvar [last] = peaks.reverse()\nconsole.log(last) //Rose\nconsole.log(peaks) //Rose, Ralston, Tallac\n</code></pre> with spread: <pre><code>var peaks = [\"Tallac\", \"Ralston\", \"Rose\"]\nvar [last] = [...peaks].reverse() //it copies!\nconsole.log(last) //Rose\nconsole.log(peaks) //Tallac, Ralston, Rose\n</code></pre></p> </li> <li>Used on object <pre><code>var morning = {\n  breakfast: \"oatmeal\",\n  lunch: \"peanut butter and jelly\"\n}\n\nvar dinner = \"mac and cheese\"\n\nvar backpackingMeals = {\n  ...morning,\n  dinner\n}\n\nconsole.log(backpackingMeals) // { breakfast: \"oatmeal\", lunch: \"peanut butter and jelly\", dinner: \"mac and cheese\"}\n</code></pre></li> </ul>"},{"location":"archived/react/learning_react_s01/#promise","title":"Promise","text":"<pre><code>const getFakeMembers = count =&gt; new Promise((resolves, rejects) =&gt; {\n  ...\n  //some actions, resolves, rejects are callbacks\n})\n\n//usage:\ngetFakeMembers(5).then(\n  data =&gt; console.log(data), //callback: resolves\n  err =&gt; console.err(...) //callback: rejects\n)\n</code></pre>"},{"location":"archived/react/learning_react_s01/#classes","title":"Classes","text":"<ul> <li>ES6 introduces class.  <pre><code>class Vacation { //by convention data type starts with uppercase\n  constructor(destination, length) {\n    this.destination = destination\n    this.length = length\n  }\n\n  print() {\n    console.log(...)\n  }\n}\n//usage:\nconst trip =  new Vacation(\"some place\", 5)\ntrip.print()\n</code></pre></li> <li>Class can be extend/inheritance <pre><code>class Expedition extends Vacation {\n  constructor(dest, length, gear) {\n    super(dest, length)\n    this.gear = gear\n  }\n\n  print() {\n    super.print()\n    console.log(\"...some other stuff ...\")\n  }\n}\n</code></pre> ES6 class use prototypal inherientance</li> </ul>"},{"location":"archived/react/learning_react_s01/#es6-modules","title":"ES6 Modules","text":"<ul> <li><code>export</code></li> <li><code>export default</code></li> <li><code>import</code></li> <li><code>import A as B</code></li> <li><code>import *</code></li> </ul>"},{"location":"archived/react/learning_react_s01/#commonjs","title":"CommonJS","text":"<pre><code>const print(message) =&gt; log(message, new Date())\nconst log(message, timestamp) =&gt; console.log(`${timestamp.toString()}: ${message}`)\nmodule.exports = {print, log} //CommonJS export\n\n//CommonJs use require not import\nconst {log, print} = require('./file.js')\n</code></pre>"},{"location":"archived/react/learning_react_s02/","title":"Functional Programming with JavaScript","text":""},{"location":"archived/react/learning_react_s02/#what-it-means-to-be-functional","title":"What it means to be functional","text":"<ul> <li>High order functions functions that take function as arguments and/or return function as return value</li> </ul>"},{"location":"archived/react/learning_react_s02/#imperative-vs-declarative","title":"Imperative vs Declarative","text":"<ul> <li>Declarative example: <pre><code>const ladAndMapMembers = compose(\n    conbineWith(sessionStorage, \"members\"),\n    save(sessionStorage, \"members\"),\n    scopeMembers(window),\n    logMemberInfoToConsole,\n    logFieldsToConsole(\"name.first\"),\n    countMembersBy(\"location.state\"),\n    prepStatesForMapping,\n    save(sessionStorage, \"map\"),\n    renderMap\n)\n\ngetFakeMembers(100).then(loadAndMapMembers)\n</code></pre></li> </ul>"},{"location":"archived/react/learning_react_s02/#functional-concepts","title":"Functional Concepts","text":""},{"location":"archived/react/learning_react_s02/#immutability","title":"Immutability","text":"<ul> <li> <p>argument  passing are by reference, it is mutable <pre><code>let color_lawn = {\n    title: \"lawn\",\n    color: \"#00FF00\",\n    rating: 0\n}\n\nfunction rateColor(color, rating) {\n    color.rating = rating\n    return color\n}\nconsole.log(rateColor(color_lawn, 5).rating) //5\nconsole.log(color_lawn.rating) //5, it changed!\n\n//Object.assign, make copy\nvar rateColorImmutable = function(color, rating) {\n    return Object.assign({}, color, {rating: rating})\n}\n\nconsole.log(rateColorImmutable(color_lawn, 2).rating) //2\nconsole.log(color_lawn.rating) //5, it remains!\n\n//better: with ES7 spread operator\nvar rateColorBetter = (color, rating) =&gt; ({\n    ...color,\n    rating\n})\n</code></pre></p> </li> <li> <p><code>Array.push</code> is not an immutable function, <code>Array.concat</code> is <pre><code>let list = [\n    { title: \"1\" },\n    { title: \"2\" },\n    { title: \"3\" },\n]\n\nvar addColor = function(title, colors) {\n    colors.push({title: title})\n    return colors\n}\nconsole.log(addColor(\"4\", list).length) //4\nconsole.log(colors.length) //4\n\nvar addColorImmutable = (title, array) =&gt; array.concat({title}) //also new code style\nconsole.log(addColorImmutable(\"5\", list).length) //5\nconsole.log(colors.length) //4\n</code></pre></p> </li> </ul>"},{"location":"archived/react/learning_react_s02/#pure-functions","title":"Pure Functions","text":"<p>Pure function have the following:</p> <ul> <li>return value based on it arguments</li> <li>take at lease 1 argument, always return a value or function</li> <li>do not cause side effect, set global variables, or change anything about application state</li> <li>treat its arguments as immutable data</li> </ul> <p>Pure functions are naturally testable</p>"},{"location":"archived/react/learning_react_s02/#data-transformations","title":"Data Transformations","text":"<ul> <li>Data transform should produce copies of transformed data and leave input immutable.</li> <li>Useful functions: <code>Array.join</code>, <code>Array.filter</code>, <code>Array.map</code>, <code>Array.reduce</code></li> <li><code>Object.keys</code> returns object property names</li> <li><code>Array.reduceRight</code> same as <code>Array.reduce</code> but process from the end of the array</li> </ul>"},{"location":"archived/react/learning_react_s02/#high-order-functions","title":"High Order Functions","text":"<ul> <li>High order functions take function as arguments and/or retuen function as return value.</li> <li> <p><code>Array.map</code>, <code>Array.filter</code>, <code>Array.reduce</code> are high order functions</p> </li> <li> <p>Currying: is the practice of holding on to some of the values needed to complete an operation until the rest can be supplied at a later point. This is archived by the use of a function returns another function: curried function. <pre><code>const userLogs = username =&gt; messages =&gt;  \n    console.log(`${username} -&gt; ${message}`) \n    //userLogs is high order function, \n    //message =&gt; is the  curried funciton?\n\nconst log = userLogs(\"grandpa23\")    \n\nlog (\"attemped to load 20 fake members\")\ngetFakeMembers(20).then(\n    members =&gt; log(`successfully loaded ${members.length} members`)\n    error =&gt; log(\"encounter an error while loading members\")\n)\n\n//grandpa23 -&gt; attemped to load 20 fake members\n//grandpa23 -&gt; successfully loaded 20 members\n</code></pre></p> </li> </ul>"},{"location":"archived/react/learning_react_s02/#recursion","title":"Recursion","text":"<ul> <li>function recall itself. <pre><code>const countDown = (value, fn) =&gt; {\n    fn(value)\n    return (value &gt; 0) ? countDown(value-1, fn) : value\n}\n\ncountDown(10, value =&gt; console.log(value))\n//10\n//9\n//8\n...\n//1\n//0\n</code></pre></li> <li>a useful recursive function demo <pre><code>const deepPick = (fields, object={}) =&gt; {\n    const [first, ...remaining] = fields.split(\".\")\n    return (remaining.length) ? deepPick(remaining.join(\".\"), object[first]) : object[first]\n}\n\nvar dan = {\n    type: \"person\",\n    data: {\n        gender: \"male\",\n        info: {\n            id: 22,\n            fullname: {\n                first: \"Dan\",\n                last: \"Deacon\"\n            }\n        }\n    }\n}\n\ndeepPick(\"type\", dan) //person\ndeepPick(\"data.info.fullname.last\") //Deacon\n</code></pre></li> </ul>"},{"location":"archived/react/learning_react_s02/#composition","title":"Composition","text":"<ul> <li>Different composition patterns <pre><code>//chain:\nconst ctime=a.replace('s', '1')\n  .replace('t', '2')\n  .replace('v', '2')\n\n//function compsition\nconst both = functionOne(functionTwo(arg))\n\n//function as args\nconst all = putAll(function1, function2, function3)\n</code></pre></li> </ul>"},{"location":"archived/react/learning_react_s02/#put-it-all-together","title":"Put it all together","text":"<ul> <li>Keep data immutable</li> <li>Keep functions pure - accept at least one argument, return data or anthoter function</li> <li>Use recursion over looping(when possible)</li> </ul>"},{"location":"archived/react/learning_react_s03/","title":"Pure React","text":""},{"location":"archived/react/learning_react_s03/#page-setup","title":"Page Setup","text":""},{"location":"archived/react/learning_react_s03/#the-virtual-dom","title":"The Virtual DOM","text":""},{"location":"archived/react/learning_react_s03/#react-elements","title":"React Elements","text":"<ul> <li><code>React.createElement</code></li> <li><code>data-reactroot</code> will always appear as an attribute of the root element of your React component.</li> </ul>"},{"location":"archived/react/learning_react_s03/#reactdom","title":"ReactDOM","text":"<ul> <li>ReactDom contains the tools to render React elements into browser.</li> <li><code>ReactDOM.render</code></li> </ul>"},{"location":"archived/react/learning_react_s03/#children","title":"Children","text":"<ul> <li>ReactDOM only allow render single element to doucment. But the single element can nest children.</li> <li><code>className</code> in React will render to HTML as css <code>class</code></li> </ul>"},{"location":"archived/react/learning_react_s03/#contructing-elements-with-data","title":"Contructing Elements with Data","text":"<pre><code>var list = [\n  \"one\", \"two\", \"three\", \"four\"\n]\n\nReact.createElement(\"ul\",\n  { className: \"someCssClass\" },\n  list.map(\n    (item, i) =&gt; \n      React.createElement(\"li\", { key: i }, item) //li need a unique key\n  )\n)\n</code></pre>"},{"location":"archived/react/learning_react_s03/#react-components","title":"React Components","text":""},{"location":"archived/react/learning_react_s03/#reactcreateclass","title":"React.createClass","text":"<ul> <li><code>React.createClass</code> may deprecate in future</li> </ul>"},{"location":"archived/react/learning_react_s03/#reactcomponent","title":"React.Component","text":"<ul> <li>es6 <pre><code>class SomeComponent extends React.Component {\n  ...\n}\n</code></pre></li> </ul>"},{"location":"archived/react/learning_react_s03/#stateless-functional-components","title":"Stateless Functional Components","text":"<ul> <li>Stateless functional components are functions, not objects; therefore, they do not have a \u201cthis\u201d scope.</li> <li>Functions for only to rendering.</li> <li>Pass data using props</li> </ul>"},{"location":"archived/react/learning_react_s03/#dom-rendering","title":"DOM Rendering","text":""},{"location":"archived/react/learning_react_s03/#factories","title":"Factories","text":"<ul> <li>Using createFactory to create an h1 <pre><code>React.DOM.h1(null, \"Baked Salmon\") //first arg is for properties, second is for the children\n</code></pre></li> </ul>"},{"location":"archived/react/learning_react_s03/#react-with-jsx","title":"React with JSX","text":""},{"location":"archived/react/learning_react_s03/#react-elements-as-jsx","title":"React Elements as JSX","text":""},{"location":"archived/react/learning_react_s03/#jsx-tips","title":"JSX Tips","text":"<ul> <li>Nested Components</li> <li>className will generate HTML <code>class=\"\"</code> for css style.</li> <li>Javascript expression wrappered in <code>{ }</code>, and will evaluated.</li> <li>Mapping array to JSX: <pre><code>&lt;ul&gt;\n  {this.props.ingredients.map((ingredient, i) =&gt;\n    &lt;li key={i}&gt;{ingredient}&lt;/li&gt;\n  )}\n&lt;/ul&gt;\n</code></pre></li> </ul>"},{"location":"archived/react/learning_react_s03/#recipes-as-jsx","title":"Recipes as JSX","text":"<pre><code>// The data, an array of Recipe objects\nvar data = [ ... ];\n// A stateless functional component for an individual Recipe\nconst Recipe = (props) =&gt; (\n...\n)\n// A stateless functional component for the Menu of Recipes\nconst Menu = (props) =&gt; (\n...\n  &lt;Recipe ...\n...\n)\n// A call to ReactDOM.render to render our Menu into the current DOM\nReactDOM.render(\n&lt;Menu recipes={data} title=\"Delicious Recipes\" /&gt;,\ndocument.getElementById(\"react-container\")\n)\n</code></pre>"},{"location":"archived/react/learning_react_s03/#babel","title":"Babel","text":"<ul> <li>presets</li> </ul>"},{"location":"archived/react/learning_react_s03/#intro-to-webpack","title":"Intro to Webpack","text":"<ul> <li>Code splitting</li> <li>Minification</li> <li>Feature flagging</li> <li>Hot Module Replacement</li> </ul>"},{"location":"archived/react/learning_react_s03/#webpack-loaders","title":"Webpack loaders","text":"<ul> <li>install web pack and dependencies <pre><code>sudo npm install -g webpack\nnpm install babel-core babel-loader babel-preset-env babel-preset-react babel-preset-stage-0 --save-dev\nnpm install react react-dom --save\n</code></pre></li> </ul>"},{"location":"archived/react/learning_react_s03/#webpack-configuration","title":"Webpack configuration","text":"<ul> <li><code>webpack.config.js</code> <pre><code>module.exports = {\n  entry: \"./src/index.js\",\n  output: {\n    path: \"dist/assets\",\n    filename: \"bundle.js\" //output dist/assets/bundle.js\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.js$/,\n        exclude: /(node_modules)/,\n        loader: ['babel-loader'],\n        query: {\n          presets: ['env', 'stage-0', 'react']\n        }\n      }\n    ]\n  }\n}\n</code></pre></li> </ul>"},{"location":"archived/react/learning_react_s03/#loading-the-bundle","title":"Loading the bundle","text":"<ul> <li> <p>index.html <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta charset=\"utf-8\"&gt;\n    &lt;title&gt;React Recipes App&lt;/title&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;div id=\"react-container\"&gt;&lt;/div&gt;\n    &lt;script src=\"assets/bundle.js\"&gt;&lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre></p> </li> <li> <p>Others: source mapping, build css and so on.</p> </li> <li>use <code>create-react-app</code> instead</li> </ul>"},{"location":"archived/react/learning_react_s04/","title":"Props, State, and the Component Tree","text":""},{"location":"archived/react/learning_react_s04/#property-validation","title":"Property Validation","text":"<ul> <li>automatic property validation</li> </ul> Type Validator Arrays React.PropTypes.array Boolean React.PropTypes.bool Funcitons React.PropTypes.func Numbers React.PropTypes.number Objects React.PropTypes.object Strings React.PropTypes.string"},{"location":"archived/react/learning_react_s04/#validating-props-with-the-createclass","title":"Validating props with the createClass","text":"<pre><code>const Summary = createClass({\n  ...\n  propTypes: {\n    ingredients: PropTypes.array,\n    steps: PropTypes.array,\n    title: PropTypes.string\n  },\n  render() {\n    ...\n</code></pre>"},{"location":"archived/react/learning_react_s04/#default-props","title":"Default props","text":"<ul> <li>to avoid warning caused by validation on initial value <pre><code>const Summary = createClass({\n...\n  propTypes: {\n    ingredients: PropTypes.number,\n    steps: PropTypes.number,\n    title: PropTypes.string\n  },\n  getDefaultProps() {\n    return {\n      ingredients: 0,\n      steps: 0,\n      title: \"[recipe]\"\n    }\n  },\n  render() {\n</code></pre></li> </ul>"},{"location":"archived/react/learning_react_s04/#custom-property-validation","title":"Custom Property Validation","text":"<ul> <li>all prop validators are functions: <pre><code>propTypes: {\n  ingredients: PropTypes.number,\n  steps: PropTypes.number,\n  title: (props, propName) =&gt;\n    (typeof props[propName] !== 'string') ?\n      new Error(\"A title must be a string\") :\n      (props[propName].length &gt; 20) ? \n        new Error(`title is over 20 characters`) : null\n}\n</code></pre></li> </ul>"},{"location":"archived/ts/ts_01/","title":"Install &amp; config","text":"<ul> <li><code>npm i -g typescript</code> OR <code>yarn global add typescript</code></li> <li><code>tsc app.ts</code> transpile app.ts to app.js</li> </ul>"},{"location":"archived/ts/ts_01/#ts-project-file","title":"TS project file","text":"<p><code>tsconfig.json</code> * compiler options * include/exclude files * support configuration inheritence <pre><code>{\n    \"compilerOptions\": {\n        \"target\": \"es5\",\n        \"noUnusedLocals\": true,\n        ...\n    },\n    \"files\": [\n        app.ts,\n        ...\n    ]\n}\n</code></pre> useful compiler options * sourceMap: true  //good for debug * watch: true //watch source code change * outDir: \"js\" //specify the build output directory * strictNullCheck: true //do not allow assign null to other type like string</p>"},{"location":"archived/ts/ts_01/#create-project-file-using-command-line","title":"Create project file using command line","text":"<p><code>ts --init</code></p>"},{"location":"archived/ts/ts_01/#multiple-project-files-and-inheritence","title":"Multiple project files and inheritence","text":"<p>You can have multiple tsconfig.json on different folder To inherient a base config file: add  <pre><code>extends: 'some-base-tsconfig.json', \n</code></pre> on the project(tsconfig.json) file.</p>"},{"location":"archived/ts/ts_01/#vscode-configure-task","title":"VScode configure task","text":"<p>F1 -&gt; task:configure task runner</p>"},{"location":"archived/ts/ts_01/#built-in-types","title":"Built-in types","text":"<ul> <li>Boolean</li> <li>Number</li> <li>String</li> <li>Enum</li> <li>Array</li> <li>Void</li> <li>Null</li> <li>Undefined</li> <li>Never</li> <li>Any</li> </ul>"},{"location":"archived/ts/ts_01/#var-let-and-const","title":"var, let and const","text":"<ul> <li><code>var</code>: hoisting.</li> <li><code>let</code>: no hoisting.</li> <li><code>const</code>: cannot change once assigned</li> </ul>"},{"location":"archived/ts/ts_01/#union-type","title":"Union type","text":"<pre><code>let value: number | string; //value is number or string\n</code></pre>"},{"location":"archived/ts/ts_01/#type-assertion","title":"Type assertion","text":"<p><pre><code>let value: any = 5;\nlet fixed: string = (&lt;number&gt;value).toFixed(4);\nlet fixed2: string = (value as number).toFixed(4);\n</code></pre> not type conversion, just ease with type: enable intellisense.</p>"},{"location":"archived/ts/ts_01/#non-null-assertion-operator","title":"non-null assertion operator","text":"<ul> <li>compiler option: <code>strictNullCheck</code> added null check.</li> <li>use uion type work with legacy js</li> <li>use non-null assertion operator work with legacy js:     <pre><code>let msgElement: HTMLElement | null = document.getElementById(\"message\");\nmsgElement!.innerText = \"OK\"; //!. just ignore the null check while compile.\n</code></pre></li> </ul>"},{"location":"archived/ts/ts_01/#compiler-type-analysis","title":"Compiler type analysis","text":"<pre><code>...//with above code\nif (msgElement == null) {\n    return msgElement; //compiler take msgElement type as null\n} else {\n    console.log(msgElement); //compiler take msgElement type as HTMLElement\n    msgElement = ... //compiler take msgElement type as HTMLElement | null again.\n }\n</code></pre>"},{"location":"archived/ts/ts_01/#better-functions-with-typescript","title":"Better functions with typescript","text":"<pre><code>function someFunc(s: number, message?: string): string {\n    ...\n}\n//here message is optional param\n</code></pre> <p>compilerOption: <code>noImplicitAny</code> </p>"},{"location":"archived/ts/ts_01/#default-param","title":"Default param","text":"<pre><code>function someGreeting(greeting: string = 'hello'): void {\n    ...\n}\nsomeGreeting();\nsomeGreeting('this is also ok');\n</code></pre>"},{"location":"archived/ts/ts_01/#arrow-function","title":"Arrow function","text":"<pre><code>(message: string) =&gt; {\n    console.log(message);\n}\n\n//same as \n(message: string) =&gt; console.log(message);\n\n//same as the following except arrow function is anonymous\nfunction someName(message: string): void  {\n    console.log(messgae);\n}\n</code></pre>"},{"location":"archived/ts/ts_01/#function-type","title":"Function type","text":"<pre><code>let logMessage = (message: string) =&gt; console.log(message);\n\nfunction logError (error: string): void {\n    console.error(error)\n}\n\nlet logger: (value: string) =&gt; void; \n/* define logger as a function:\nfunction will take a string param return void. \nfunction type is: (value: string)=&gt; void\n*/\n\n//usage: it works since logError, logMessage are same type\nif (thereAreError) {\n    logger = logError;\n} else {\n    logger = logMessage\n}\n</code></pre>"},{"location":"archived/ts/ts_01/#creating-and-using-customized-types","title":"Creating and using customized types","text":""},{"location":"archived/ts/ts_01/#interface","title":"Interface","text":"<pre><code>interface Employee{\n    name: string;\n    title: string;\n}\n\ninterface Manager extends Emplyee {\n    department: string;\n    scheduleMeeting: (topic: string) =&gt; void;\n}\n\n\n## Strcutural type system\n```typescript\n//with about code \nlet developer = {\n    name: \"some-name\",\n    title: \"some-title\",\n    editor: \"waht?\"\n}\n\nlet newEmployee: Employee = developer;\n//this works, newEmployee will copy name, title from developer\n</code></pre>"},{"location":"archived/ts/ts_01/#class","title":"Class","text":"<ul> <li>Members can be: <ul> <li>public</li> <li>private</li> <li>protected</li> </ul> </li> </ul> <p>class members are public by default</p> <p>class inheritence <pre><code>class Developer {\n    ...\n}\n\nclass WebDeveloper extends Developer {\n    ...\n}\n</code></pre></p>"},{"location":"archived/ts/ts_01/#implementing-an-interface","title":"Implementing an interface","text":"<pre><code>interface Employee {\n    name: string;\n    title: string;\n    logID: () =&gt; string;\n}\n\nclass Engineer implements Employee {\n    name: string;\n    title: string;\n    logID() {\n        return `${this.name}_${this.title}`;\n    }\n}\n</code></pre>"},{"location":"archived/ts/ts_01/#typescript-file-reference","title":"Typescript file reference","text":"<p><pre><code>// &lt;reference path=\"person.ts\"/&gt;\n</code></pre> In <code>tsconfig.json</code>, set <code>compilerOptions</code> -&gt; <code>outFile: \"some file\"</code>, compiler will pack all referenced file together in a single js file.</p>"},{"location":"archived/ts/ts_01/#static-members","title":"Static members","text":"<pre><code>class SomeClass {\n    static value: string = '1,2,3';\n    ...\n}\nSomeClass.value=\"456\";\n</code></pre>"},{"location":"archived/ts/ts_01/#constructor","title":"Constructor","text":"<pre><code>class SomeImplClass extends SomeBaseClass {\n    readonly age: number; //same as C# readonly\n    constructor(param: number) {\n        super(); //same as C# or Java\n        this.age = param; //readonly can only set in constructor\n    }\n}\n\nclass Game {\n    constructor (public name: string) { //same as Angular :)\n        ...\n    }\n }\n</code></pre>"},{"location":"archived/ts/ts_02/","title":"Creating and using typescript module","text":""},{"location":"archived/ts/ts_02/#supporting-technologies","title":"Supporting technologies","text":"<pre><code>TS -&gt; Typescript compiler -&gt; Javascript Modules -&gt; Loader/Bundler\n                             . AMD                 . Node\n                             . CommonJs            . RequireJs \n                             . UMD                 . SystemJs\n                             . System              . Webpack \n                             . ES2015 \n  ```\n\n### Export declarations\n```typescript\n//person.ts\nexport interface Person {}\nexport function hireDeveloper(): void {}\nexport default class Employee {} \n//when import, if you do not specify what to import, then Employee is imported\nclass Manager {} //not accessible outsite\n</code></pre>"},{"location":"archived/ts/ts_02/#exprot-statement","title":"Exprot statement","text":"<pre><code>//person2.ts\ninterface Person {}\nfunction hireDevelopr(): void() {}\nclass Employee {}\nclass Manager {}\nexport { Person, hireDeveloper, Employee as Staff };\n</code></pre>"},{"location":"archived/ts/ts_02/#importing-a-module","title":"Importing a module","text":"<pre><code>import { Person, hireDeveloper } from './person';\nimport Worker from './person'; // no {}, import will take defaul export Employee alias as Worker.\nimport { Staff as CoWorker } from './person2'; //alias again\nimport * as HR from './person';\nHR.hireDeveloper();\n</code></pre> <p>compilerOptions: module: commonJs</p>"},{"location":"archived/ts/ts_02/#relative-vs-non-relative-imports","title":"Relative vs non-relative imports","text":"<ul> <li>relative <pre><code>import { Bla } form './bla';\n</code></pre></li> <li>non relative, usually for 3rd party library <pre><code>import * as lodash from 'lodash';\n</code></pre></li> </ul> <p>different search path</p>"},{"location":"archived/ts/ts_02/#module-resolution-strategies","title":"Module resolution strategies","text":"<ul> <li>Classic vs Node</li> <li>compilerOption: traceResolution = true helps trouble shooting</li> </ul>"},{"location":"archived/ts/ts_02/#type-declaration-files","title":"Type declaration files","text":"<ul> <li><code>*.d.ts</code></li> <li>DefinitlyTyped on github</li> <li>https://microsoft.github.io/TypeSearch/ <pre><code>npm install --save lodash\nnpm install --save @types/lodash\n</code></pre></li> </ul>"},{"location":"archived/web/web_s01/","title":"Diff HTML5 Local storage vs. Session storage","text":"<p><code>localStorage</code> and <code>sessionStorage</code> both extend Storage. There is no difference between them except for the intended \"non-persistence\" of sessionStorage.</p> <p>That is, the data stored in <code>localStorage</code> persists until explicitly deleted. Changes made are saved and available for all current and future visits to the site.</p> <p>For <code>sessionStorage</code>, changes are only available per window (or tab in browsers like Chrome and Firefox). Changes made are saved and available for the current page, as well as future visits to the site on the same window. Once the window is closed, the storage is deleted.</p>"},{"location":"archived/web/web_s02/","title":"REST+JSON API Design - Best Practices","text":""},{"location":"archived/web/web_s02/#why-rest","title":"Why REST?","text":"<ul> <li>Scalability not performance but more throughput, handles more request</li> <li>Generality  well-known HTTP protocol, all languages can interactive with it (widely adopted).</li> <li>Independence</li> <li>Latency(Caching) use caching reduce latency</li> <li>Security has some facility to ensure security</li> <li>Encapsulation</li> </ul>"},{"location":"archived/web/web_s02/#resource","title":"Resource","text":"<ul> <li>Collection Resource</li> <li>Instance Resource</li> </ul>"},{"location":"archived/web/web_s02/#why-json","title":"Why JSON?","text":"<ul> <li>Ubiquity</li> <li>Simplicity </li> <li>Readability human readable</li> <li>Scalability</li> <li>Flexibility easy to change.</li> </ul>"},{"location":"archived/web/web_s02/#hateoas","title":"HATEOAS","text":"<ul> <li>H yermedia</li> <li>A s</li> <li>T he</li> <li>E ngine</li> <li>O f</li> <li>A pplication</li> <li>S tate</li> </ul> <p>See wiki:  Very nice Example</p>"},{"location":"archived/web/web_s02/#put","title":"PUT","text":"<p>According RFC, put is idempotent. Clients can make that same call repeatedly while producing the same result. When use put, send all fields. Can be used for create and update. Cannot be used for partial update. Patch is for partial update.</p> <ul> <li>for Create, in case the id is already known. must put all data, (not partial) for idempotent. <pre><code>PUT /applications/client-specified-id\n{ ... }\n</code></pre></li> <li>for Update, must full replacement for idempotent. <pre><code>PUT /applications/some-id\n{ ... }\n</code></pre></li> </ul>"},{"location":"archived/web/web_s02/#post","title":"POST","text":"<ul> <li> <p>for Create always a parent resource(collection resource) <pre><code>POST /applications\n{\n    \"name\": \"some-application\"\n}\n</code></pre> Response 201 and location in header: <pre><code>201 created\nLocation: http://server/applications/some-id\n</code></pre></p> </li> <li> <p>for Update on instance resource, no idempotent required according RFC</p> </li> </ul> <p>returns 200, no location, since location is already known. can be used on both full update and partial update.</p> <p>Partial update can reduce network traffic. <pre><code> 200 OK\n</code></pre> POST is the only verb that NOT idempotent</p>"},{"location":"archived/web/web_s02/#media-types","title":"Media Types","text":"<ul> <li>Format Specification + Parsing Rules</li> <li>Request should always have Accept: header</li> <li> <p>Response should always have Content-Type: header</p> </li> <li> <p>can create you own media type like: application/foo+json</p> </li> </ul>"},{"location":"archived/web/web_s02/#version","title":"Version","text":"<ul> <li>URL: <code>https://api.ss.com/v1/</code>, easy to design, difficult to deploy</li> </ul> <p>VS * Media Type: <code>application/json;application&amp;v=1</code>, difficult to design, easy deploy</p>"},{"location":"archived/web/web_s02/#camelcase","title":"camelCase","text":"<p>JSON should be camelCase, it is JavaScript convention. Do not break it.</p>"},{"location":"archived/web/web_s02/#datetimetimestamp","title":"Date/Time/Timestamp","text":"<p>Use the standard: ISO 8601: <pre><code>\"dateCreated\": \"2012-07-10T18:02:24.343Z\" \n</code></pre> Use UTC!</p>"},{"location":"archived/web/web_s02/#href","title":"HREF","text":"<ul> <li>Distributed Hypermedia</li> <li>Every accessible resource has a unique URL</li> </ul>"},{"location":"archived/web/web_s02/#response-body","title":"Response Body","text":"<ul> <li>GET: yes</li> <li>POST: <ul> <li>return the representation(same data?) in the response when feasible</li> <li>add override(?_body=false)</li> </ul> </li> </ul>"},{"location":"archived/web/web_s02/#header","title":"header","text":"<ul> <li>Accept header values comma delimited in order of preference <pre><code>GET /applications/a1b2c3d4\nAccept: application/json, text/plain\n</code></pre> means prefer application/json better.</li> </ul>"},{"location":"archived/web/web_s02/#resource-extensions","title":"Resource Extensions","text":"<p><pre><code>/applications/a1b2c3d4.json\n/applications/a1b2c3d4.csv\n</code></pre> Conventionally overrides Accept header</p>"},{"location":"archived/web/web_s02/#resource-references-linking","title":"Resource References (Linking)","text":"<ul> <li>Linking is fundamental to scalability</li> <li>Instance Reference</li> <li>Collection Reference <pre><code>GET /workers/xalclaef\n200 OK\n{\n    \"href\": \"http://....\",\n    \"userName\": \"someOne\",\n    //collection reference\n    \"groups\": {\n        \"href\": \"http://...\"\n    }\n    //instance reference\n    \"employer\": {\n        \"href\": \"http://...\"\n    } \n}\n</code></pre></li> </ul>"},{"location":"archived/web/web_s02/#reference-expansion-entity-expansion-link-expansion","title":"Reference Expansion (Entity Expansion, Link Expansion)","text":"<p>Span/Flat links in a JSON document, and return a combined \"big\" JSON Use expand parameter. <pre><code>GET /workers/xalclaef?expand=employer\n\n200 OK \n{\n    \"href\": \"http://....\",\n    \"userName\": \"someOne\",\n    //collection reference\n    \"groups\": {\n        \"href\": \"http://...\"\n    }\n    //instance reference\n    \"employer\": {\n        \"href\": \"http://...\",\n        \"name\": \"CNPC\",\n        \"address\": \"5850 Opus Pkwy\"\n        ...\n    } \n}\n</code></pre></p>"},{"location":"archived/web/web_s02/#partial-representations","title":"Partial Representations","text":"<p><code>GET /workers/xalclaef?fields=givenName,surname,employer(name)</code></p>"},{"location":"archived/web/web_s02/#collection-resource-supports-query-params","title":"Collection Resource supports query params:","text":"<ul> <li>Offset</li> <li>Limit <pre><code>/applications?offset=50&amp;limit=20\n</code></pre></li> </ul>"},{"location":"archived/web/web_s03/","title":"CORS and withCredentials issue","text":""},{"location":"archived/web/web_s03/#symptom","title":"Symptom","text":"<p>When server have CORS enabled, cookie/session does not persist among requests.</p>"},{"location":"archived/web/web_s03/#solution","title":"Solution","text":""},{"location":"archived/web/web_s03/#client-when-send-request-should-add-withcredentials-true-in-header","title":"Client: when send request should add <code>withCredentials: true</code> in header","text":"<pre><code>let headers = new Headers();\nheaders.append('Content-Type', 'application/json');\nlet options = new RequestOptions({ headers: headers, withCredentials: true });\nhttp.post('http://localhost:3000/api/authenticate' , data, this.options);\n</code></pre>"},{"location":"archived/web/web_s03/#server-cors-header-need-adjust","title":"Server: CORS header need adjust","text":"<p><pre><code>res.header(\"Access-Control-Allow-Origin\", \"http://localhost:4200\"); \nres.header(\"Access-Control-Allow-Credentials\", true);\n</code></pre> Access-Control-Allow-Origin cannot use *, otherwise the following error:</p> <p><code>Response to preflight request doesn't pass access control check: The value of the 'Access-Control-Allow-Origin' header in the response must not be the wildcard '*' when the request's credentials mode is 'include'. Origin 'http://localhost:4200' is therefore not allowed access. The credentials mode of requests initiated by the XMLHttpRequest is controlled by the withCredentials attribute.</code></p> <p>Additonal: </p> <p>preflight request</p>"},{"location":"k8s/helm_k8s/","title":"About HELM","text":""},{"location":"k8s/helm_k8s/#helm","title":"\u4ec0\u4e48\u662fHELM","text":"<p>HELM\u662f\u5b98\u65b9\u63d0\u4f9b\u7684\u7c7b\u4f3c\u4e8e YUM \u7684\u5305\u7ba1\u7406\u5668\uff0c\u662f\u90e8\u7f72\u73af\u5883\u7684\u6d41\u7a0b\u5c01\u88c5\u3002HELM\u6709\u4e24\u4e2a\u91cd\u8981\u7684\u6982\u542b: chart \u548crelease:</p> <ul> <li>chart \u662f\u521b\u5efa\u4e00\u4e2a\u5e94\u7528\u7684\u4fe1\u606f\u96c6\u5408\uff0c \u5305\u62ec\u5404\u79cd Kubernetes \u5bf9\u8c61\u7684\u914d\u7f6e\u6a21\u677f\u3001 \u53c2\u6570\u5b9a\u4e49\u3001 \u4f9d\u8d56\u5173\u7cfb\u3001 \u6587\u6863\u8bf4\u660e\u7b49\u3002chart \u662f\u5e94\u7528\u90e8\u7f72\u7684\u81ea\u5305\u542b\u903b\u8f91\u5355\u5143\u3002\u53ef\u4ee5\u5c06chat\u60f3\u8c61\u6210apt, yum\u4e2d\u7684\u8f6f\u4ef6\u5b89\u88c5\u5305</li> <li>release\u662fchart\u7684\u8fd0\u884c\u5b9e\u4f8b\uff0c\u4ee3\u8868\u4e86\u4e00\u4e2a\u6b63\u5728\u8fd0\u884c\u7684\u5e94\u7528\u3002\u5f53chart\u88ab\u5b89\u88c5\u5230kubernetes\u96c6\u7fa4\uff0c\u5c31\u751f\u6210\u4e00\u4e2arelease\u3002chart\u80fd\u591f\u591a\u6b21\u5b89\u88c5\u5230\u540c\u4e00\u4e2a\u96c6\u7fa4\uff0c\u6bcf\u6b21\u5b89\u88c5\u90fd\u662f\u4e00\u4e2arelease</li> </ul>"},{"location":"k8s/helm_k8s/#helm-helmtiller","title":"HELM \u5305\u542b\u4e24\u4e2a\u7ec4\u4ef6\uff1a HELM\u5ba2\u6237\u7aef\u548cTiller\u670d\u52a1\u5668:","text":""},{"location":"k8s/helm_k8s/#install-helm","title":"Install HELM","text":"<pre><code>$ wget https://get.helm.sh/helm-v3.4.1-linux-amd64.tar.gz\n$ tar vxzf helm-v3.4.1-linux-amd64.tar.gz\n$ sudo mv linux-amd64/helm /usr/local/bin/helm\n$ helm version\n# clean up\n$ rm helm-v3.4.1-linux-amd64.tar.gz\n$ rm -rf linux-amd64\n</code></pre>"},{"location":"k8s/helm_k8s/#initalize-chart-repo","title":"Initalize chart repo","text":"<pre><code># add and update repo\n$ helm repo add \"stable\" \"https://charts.helm.sh/stable\" --force-update\n</code></pre>"},{"location":"k8s/helm_k8s/#search-chart","title":"Search chart","text":"<pre><code>$ helm search hub kafka\n</code></pre>"},{"location":"k8s/helm_k8s/#install-a-package","title":"Install a package","text":"<p><pre><code>$ helm install happy-panda stable/mariadb\n</code></pre> happy-panda is the release name</p>"},{"location":"k8s/helm_k8s/#build-heml-template","title":"Build HEML Template","text":"<ul> <li> <p>\u521b\u5efa\u6587\u4ef6\u5939     <pre><code>$ mkdir ./hello-world\n$ cd ./hello-world\n</code></pre></p> </li> <li> <p>\u521b\u5efa\u81ea\u63cf\u8ff0\u6587\u4ef6Chart.yaml\uff0c\u8fd9\u4e2a\u6587\u4ef6\u5fc5\u987b\u6709name\u548cversion\u5b9a\u4e49     <pre><code>$ cat &lt;&lt; 'EOF' &gt; -/Chart.yaml\nname: hello-world\nversion: 1.0.0\nEOF\n</code></pre></p> </li> <li> <p>\u521b\u5efa\u6a21\u677f\u6587\u4ef6\uff0c\u7528\u4e8e\u751f\u6210 Kubernetes \u8d44\u6e90\u6e05\u5355(manifests)     <pre><code>$ mkdir ./templates # folder name has to be templates\n$ cat &lt;&lt; 'EOF' &gt; ./templates/deployment.yaml\napiVersion: extensions/v1beta1\nkind: Deployment\nmetadata:\n  name: hello-world\nspec:\n  replicas: 1\n  template:\n    metadata:\n      labels:\n        app: hello-world\n    spec:\n      containers:\n        - name: hello-world\n          image: hub.atguigu.com/library/myapp:v1\n          ports:\n            - containerPort: 8089\n            protocol: TCP\nEOF\n$ cat &lt;&lt;'EOF' &gt; .itemplates/service.yaml\napiVersion: v1\n  kind: Service\n  metadata:\n    name: hello-world\n  spec:\n    type: NodePort\n    ports:\n    - port: 8989\n      targetPort: 8980\n      protocol: TCP\n    selector:\n      app: hello-world\nEOF\n</code></pre></p> <ul> <li>To install your template <pre><code>$ helm install .\n</code></pre></li> </ul> </li> </ul>"},{"location":"k8s/helm_k8s/#some-helm-commands","title":"Some HELM Commands","text":"<ul> <li>list deployed releases     <pre><code>$ helm ls\n</code></pre></li> </ul>"},{"location":"k8s/k3s/","title":"Install kubectl","text":"<pre><code>sudo apt update &amp;&amp; sudo apt upgrade -y\ncurl -LO \"https://storage.googleapis.com/kubernetes-release/release/$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt)/bin/linux/amd64/kubectl\"\nchmod a+x ./kubectl\n./kubectl version --client\nsudo mv ./kubectl /usr/local/bin/kubectl\nkubectl version --client\n</code></pre>"},{"location":"k8s/k3s/#install-k3d","title":"Install k3d","text":"<pre><code>curl -s https://raw.githubusercontent.com/rancher/k3d/main/install.sh | bash\nk3d --help\n</code></pre>"},{"location":"k8s/k3s/#create-cluster","title":"Create cluster","text":"<pre><code># t500 is the cluster name\n# if you want generate cert for addition ips add  -x --tls-san=\"1.2.3.4\"\n# check https://github.com/rancher/k3d/issues/36\nk3d cluster create t500 --api-port 6443 --servers 1 --agents 1 -p \"30000-32767:30000-32767@server[0]\"\nkubectl custer--info\n</code></pre>"},{"location":"k8s/k3s/#deploy-portainer","title":"Deploy portainer","text":"<p><pre><code>kubectl get sc\nkubectl create namespace portainer\nkubectl apply -n portainer -f https://raw.githubusercontent.com/portainer/k8s/master/deploy/manifests/portainer/portainer.yaml\n# show portainer pod\nkubectl get pods --namespace portainer\n# show pod details: portainer-c999955f7-khw2b from last command output\nkubectl describe pods portainer-c999955f7-khw2b --namespace portainer\n</code></pre> now go to http://your_ip:30777/#!/init/admin see portainer web ui</p>"},{"location":"k8s/k8s-setup/","title":"Install and Configure Kubernetes (k8s) on Ubuntu 18.04 LTS","text":""},{"location":"k8s/k8s-setup/#vm","title":"VM","text":"Description hostname ip Master Node k8s-master 192.168.1.160 Slave Node 1 k8s-worker-node1 192.168.1.161 Slave Node 2 k8s-worker-node1 192.168.1.163 <p>In HyperV:  master node need 2 cpus</p>"},{"location":"k8s/k8s-setup/#setup-hostname","title":"Setup hostname","text":"<ul> <li>on all nodes <pre><code>sudo nano /etc/cloud/cloud.cfg\n</code></pre> change the following line to <code>true</code>: <pre><code># This will cause the set+update hostname module to not operate (if true)\npreserve_hostname: true\n</code></pre></li> <li>on 160 <pre><code>sudo hostnamectl set-hostname \"k8s-master\"\nexec bash\n</code></pre></li> <li>on 161 <pre><code>sudo hostnamectl set-hostname k8s-worker-node1\nexec bash\n</code></pre></li> <li>on 163 <pre><code>sudo hostnamectl set-hostname k8s-worker-node2\nexec bash\n</code></pre></li> </ul>"},{"location":"k8s/k8s-setup/#tweak-hosts-file-on-all-nodes","title":"Tweak hosts file on all nodes","text":"<p><pre><code>sudo nano /etc/hosts\n</code></pre> add the following: <pre><code>192.168.1.160     k8s-master\n192.168.1.161     k8s-worker-node1\n192.168.1.163     k8s-worker-node2\n</code></pre></p>"},{"location":"k8s/k8s-setup/#install-docker-on-all-nodes","title":"Install Docker on all nodes","text":"<pre><code>sudo apt-get install docker.io -y\nsudo systemctl start docker\nsudo systemctl enable docker\ndocker --version\n</code></pre>"},{"location":"k8s/k8s-setup/#install-k8-on-all-nodes","title":"Install K8 on all nodes","text":"<pre><code>sudo apt-get install apt-transport-https curl -y\ncurl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | sudo apt-key add\nsudo apt-add-repository \"deb http://apt.kubernetes.io/ kubernetes-xenial main\"\nsudo swapoff -a #disable swap, edit /etc/fstab comment out the swap line, if you want disable it permanently\nsudo apt-get install kubeadm -y\nkubeadm version\n</code></pre>"},{"location":"k8s/k8s-setup/#init-master-node-160","title":"Init master node (160)","text":"<p><pre><code>sudo kubeadm init --pod-network-cidr=172.16.0.0/12 #any network\n</code></pre> Example output like: <pre><code>...\n[bootstrap-token] configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a                                                                                                                              Node Bootstrap Token\n[bootstrap-token] configured RBAC rules to allow certificate rotation for all node client certificates in the                                                                                                                              cluster\n[bootstrap-token] Creating the \"cluster-info\" ConfigMap in the \"kube-public\" namespace\n[addons] Applied essential addon: CoreDNS\n[addons] Applied essential addon: kube-proxy\n\nYour Kubernetes control-plane has initialized successfully!\n\nTo start using your cluster, you need to run the following as a regular user:\n\n  mkdir -p $HOME/.kube\n  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\n  sudo chown $(id -u):$(id -g) $HOME/.kube/config\n\nYou should now deploy a pod network to the cluster.\nRun \"kubectl apply -f [podnetwork].yaml\" with one of the options listed at:\n  https://kubernetes.io/docs/concepts/cluster-administration/addons/\n\nThen you can join any number of worker nodes by running the following on each as root:\n\nkubeadm join 192.168.1.160:6443 --token hmfqsj.pblv9xpfcde5n3zy \\\n    --discovery-token-ca-cert-hash sha256:af0a947b5933c06232397361f71fc9b553068775f0fb776a534e761bf74c7afb\n</code></pre></p> <p>Run the command in the output: <pre><code>mkdir -p $HOME/.kube\nsudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\nsudo chown $(id -u):$(id -g) $HOME/.kube/config\n</code></pre> Check node: <pre><code>kubectl get nodes\n</code></pre> Deploy Flannel as Pod Network from Master node and verify pod namespaces <pre><code>sudo kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml\nsudo  kubectl get nodes\nsudo  kubectl get pods --all-namespaces\n</code></pre></p> <p>## Add Slave or Worker Nodes to the Cluster  Run the command in master output, like the following:  <code>bash  sudo kubeadm join 192.168.1.160:6443 --token hmfqsj.pblv9xpfcde5n3zy \\     --discovery-token-ca-cert-hash sha256:af0a947b5933c06232397361f71fc9b553068775f0fb776a534e761bf74c7afb</code></p>"},{"location":"k8s/rke_k8s/","title":"Create K8S cluster using RKE","text":""},{"location":"k8s/rke_k8s/#environments","title":"Environments:","text":"OS RAM Disk IP Client WSL: Kali-linux n/a n/a n/a Master Ubuntu 20.04 4G 64G 192.168.1.171 Worker-1 Ubuntu 20.04 4G 64G 192.168.1.172 Worker-2 Ubuntu 20.04 4G 64G 192.168.1.173"},{"location":"k8s/rke_k8s/#install-docker-on-master-worker-1-worker-2","title":"Install docker on Master, Worker-1, Worker-2","text":"<pre><code>sudo apt update &amp;&amp; sudo apt upgrade -y\ncurl https://releases.rancher.com/install-docker/19.03.sh | sh\nsudo apt update &amp;&amp; sudo apt upgrade -y\nsudo reboot\n</code></pre>"},{"location":"k8s/rke_k8s/#the-following-steps-should-be-taken-on-the-client-machine","title":"The following steps should be taken on the Client machine","text":""},{"location":"k8s/rke_k8s/#install-rke","title":"Install RKE","text":"<pre><code>wget https://github.com/rancher/rke/releases/download/v1.0.14/rke_linux-amd64\nmv rke_linux-amd64 rke\nchmod a+x rke\nsudo mv rke /usr/local/bin\nrke --version\n</code></pre>"},{"location":"k8s/rke_k8s/#prepare-ssh-id-i-give-no-passphrase-to-make-it-easy","title":"Prepare ssh id, I give no passphrase to make it easy","text":"<pre><code>ssh-keygen\n# copy to all nodes\nssh-copy-id lihe@192.168.1.171\nssh-copy-id lihe@192.168.1.172\nssh-copy-id lihe@192.168.1.173\n</code></pre>"},{"location":"k8s/rke_k8s/#prepare-clusteryml","title":"Prepare cluster.yml","text":"<pre><code># prepare working folder, we put all our files there\nmkdir ~/k8rke\ncd ~/k8rke\ncat &lt;&lt; EOF &gt; cluster.yml\nnodes:\n    - address: 192.168.1.171\n      user: lihe\n      role:\n        - controlplane\n        - etcd\n        - worker\n    - address: 192.168.1.172\n      user: lihe\n      role:\n        - worker\n    - address: 192.168.1.173\n      user: lihe\n      role:\n        - worker\nEOF\n</code></pre>"},{"location":"k8s/rke_k8s/#create-k8s-cluster-using-rke_1","title":"Create k8s cluster using rke","text":"<p><pre><code>rke up\n</code></pre> Long time wait.</p>"},{"location":"k8s/rke_k8s/#known-issue","title":"Known Issue:","text":"<p><pre><code>FATA[0722] Failed to get job complete status for job rke-network-plugin-deploy-job in namespace kube-system\n</code></pre> Solution</p> <p>run <code>rke up</code> again: <pre><code>rke up\n</code></pre></p>"},{"location":"k8s/rke_k8s/#install-kubectl","title":"Install kubectl","text":"<pre><code>curl -LO \"https://storage.googleapis.com/kubernetes-release/release/$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt)/bin/linux/amd64/kubectl\"\nchmod a+x kubectl\nsudo mv kubectl /usr/local/bin\nkubectl version --client\n</code></pre>"},{"location":"k8s/rke_k8s/#prepare-config-file-for-kubectl","title":"Prepare config file for kubectl","text":"<p>when create cluster via <code>rke up</code>, a file named <code>kube_config_cluster.yml</code> is created under <code>~/k8rke</code>. That is the config file for kubectl connect to the cluster. <pre><code>mkdir ~/.kube\ncp ~/k8rke/kube_config_cluster.yml ~/.kube/config\n</code></pre></p>"},{"location":"k8s/rke_k8s/#verify-connection","title":"Verify connection","text":"<p><pre><code>kubectl cluster-info\n</code></pre> Should see something like the following: <pre><code>Kubernetes master is running at https://192.168.1.171:6443\nCoreDNS is running at https://192.168.1.171:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy\n\nTo further debug and diagnose cluster problems, use 'kubectl cluster-info dump'.\n</code></pre></p>"},{"location":"k8s/rke_k8s/#connect-cluster-using-lens","title":"Connect cluster using LENS","text":"<ul> <li>Install LENS: https://k8slens.dev/</li> <li>Add cluster: use the same config file for kubectl </li> <li>Turn on <code>Metrics Stack</code>(Prometheus) on LENS:</li> <li>right click the cluster icon, then <code>settings</code> </li> </ul>"},{"location":"ops/01_vault/","title":"Install HashCorp Vault on Raspberry Pi","text":""},{"location":"ops/01_vault/#dowload-arm-version-binary","title":"Dowload arm version binary","text":"<ul> <li>https://www.vaultproject.io/downloads <pre><code>cd ~/Downloads\nwget https://releases.hashicorp.com/vault/1.6.2/vault_1.6.2_linux_arm.zip\n</code></pre></li> </ul>"},{"location":"ops/01_vault/#prepare-file-and-folder","title":"Prepare file and folder","text":"<pre><code>sudo mkdir /opt/vault\ncd /opt/vault\nsudo unzip ~/Downloads/vault_1.6.2_linux_arm.zip\n</code></pre>"},{"location":"ops/01_vault/#prepare-ssl-cert","title":"Prepare SSL cert","text":"<pre><code>sudo mkdir /opt/vault/certs\ncd /opt/vault/certs\nsudo openssl req -newkey rsa:4096 \\\n            -x509 \\\n            -sha256 \\\n            -days 3650 \\\n            -nodes \\\n            -out vault.crt \\\n            -keyout vault.key\n</code></pre>"},{"location":"ops/01_vault/#config-vault","title":"Config Vault","text":"<p><pre><code>sudo mkdir /opt/vault/data\nsudo mkdir /opt/vault/config\nsudo nano /opt/vault/config/config.hcl\n</code></pre> File content: <pre><code>storage \"raft\" {\n  path    = \"/opt/vault/data\"\n  node_id = \"primary\"\n}\n\nlistener \"tcp\" {\n  address     = \"0.0.0.0:8200\"\n  tls_cert_file = \"/opt/vault/certs/vault.crt\"\n  tls_key_file  = \"/opt/vault/certs/vault.key\"\n}\n\napi_addr = \"https://0.0.0.0:8200\"\ncluster_addr = \"https://0.0.0.0:8201\"\nui = true\n</code></pre></p>"},{"location":"ops/02_jenkins_on_pi/","title":"Install Jenkins on raspberry pi","text":"<pre><code>sudo apt update &amp;&amp; sudo apt upgrade -y\nsudo apt install openjdk-11-jre -y\njava --version\nwget -q -O - https://pkg.jenkins.io/debian/jenkins.io.key | sudo apt-key add -\necho 'deb https://pkg.jenkins.io/debian binary/' | sudo tee -a /etc/apt/sources.list.d/jenkins.list\nsudo apt update\nsudo apt install jenkins -y\n</code></pre>"},{"location":"redis/01_intro/","title":"Redis Intro","text":""},{"location":"redis/01_intro/#_1","title":"\u5e94\u7528\u573a\u666f","text":"<ol> <li>\u914d\u5408\u5173\u7cfb\u578b\u6570\u636e\u5e93\u505a\u9ad8\u901f\u7f13\u5b58<ul> <li>\u9ad8\u9891\uff0c \u70ed\u70b9\u6570\u636e\uff0c\u964d\u4f4eIO</li> <li>\u5206\u5e03\u5f0f\u6784\u67b6\uff0c\u505asession\u5171\u4eab</li> </ul> </li> <li>\u7531\u4e8e\u5176\u62e5\u6709\u6301\u4e45\u5316\u80fd\u529b\uff0c\u5229\u7528\u5176\u591a\u6837\u7684\u6570\u636e\u7ed3\u6784\u5b58\u50a8\u7279\u5b9a\u7684\u6570\u636e<ul> <li>\u6700\u65b0N\u4e2a\u6570\u636e \uff08\u901a\u8fc7List\u5b9e\u73b0\u6309\u81ea\u7136\u65f6\u95f4\u6392\u5e8f\u7684\u6570\u636e\uff09</li> <li>\u6392\u884c\u699c\uff0c Top N\uff08\u5229\u7528zset\u6709\u5e8f\u96c6\u5408\uff09</li> <li>\u65f6\u6548\u6027\u6570\u636e\uff0c\u6bd4\u5982\u624b\u673a\u9a8c\u8bc1\u7801\uff08Expire\u8fc7\u671f\uff09</li> <li>\u8ba1\u6570\u5668\uff0c\u79d2\u6740\uff08\u539f\u5b50\u6027\uff0c\u81ea\u589e\u51cf\u65b9\u6cd5INCR, DECR)</li> <li>\u53bb\u91cd\uff08\u5229\u7528Set\u96c6\u5408\uff09</li> <li>\u6784\u5efa\u961f\u5217\uff08\u5229\u7528LIst\uff09</li> <li>\u53d1\u5e03/\u8ba2\u9605 (pub/sub)</li> </ul> </li> </ol>"},{"location":"redis/01_intro/#redisio","title":"Redis\u662f\u5355\u7ebf\u7a0b\u5341\u591a\u8defIO\u590d\u7528\u6280\u672f","text":"<p>\u591a\u8def\u590d\u7528\u662f\u6307\u4f7f\u7528\u4e00\u4e2a\u7ebf\u7a0b\u6765\u68c0\u67e5\u591a\u4e2a\u6587{\u725b\u63cf\u8ff0\u7b26 (Socket) \u7684\u5c31\u7eea\u72b6\u6001\uff0c \u6bd4\u5982\u8c03\u7528select\u548cepoll\u51fd\u6570, \u4f20\u5165\u591a\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26\uff0c\u5982\u679c\u6709\u4e00\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26\u5c31\u7eea\u5219\u8fd4\u56de, \u5426\u5219\u963b\u585e\u76f4\u5230\u8d85\u65f6\u3002 \u5f97\u5230\u5c31\u7eea\u72b6\u6001\u540e\u8fdb\u884c\u771f\u6b63\u7684\u64cd\u4f5c\u53ef\u4ee5\u5728\u540c\u4e00\u4e2a\u7ebf\u7a0b\u91cc\u6267\u884c, \u4e5f\u53ef\u4ee5\u542f\u52a8\u7ebf\u7a0b\u6267\u884c (\u6bd4\u5982\u4f7f\u7528\u7ebf\u7a0b\u6c60) \u3002</p>"},{"location":"redis/01_intro/#redis","title":"Redis \u4e94\u5927\u6570\u636e\u7c7b\u578b","text":"<pre><code>* string \n* set\n* list\n* hash\n* zset\n</code></pre> <p>By default Redis has 16 db, can be configure to more or less. <code>select 1</code> switch to db 1</p>"},{"location":"redis/02_key_ops/","title":"Common Operations on Key","text":"Commands Description <code>keys *</code> get all keys which match the patter * for all keys <code>exists &lt;key&gt;</code> check if key exists <code>type &lt;key&gt;</code> check value type for the key <code>del &lt;key&gt;</code> delete key <code>expire &lt;key&gt; &lt;seconds&gt;</code> set expire time in seconds <code>ttl &lt;key&gt;</code> check time to live for a key, -1: never expire, -2: expired <code>dbsize</code> check current database key count <code>flushdb</code> delete all keys under current db <code>flushall</code> delete all keys across all dbs"},{"location":"redis/03_string/","title":"String","text":"<ul> <li>String\u662fRedis\u6700\u57fa\u672c\u7684\u7c7b\u578b, \u4f60\u53ef\u4ee5\u7406\u89e3\u6210\u4e0eMemcached\u4e00\u6a21\u4e00\u6837\u7684\u7c7b\u578b, \u4e00\u4e2akey\u5bf9\u5e94\u4e00\u4e2avalue.</li> <li>String\u7c7b\u578b\u662f\u4e8c\u8fdb\u5236\u5b89\u5168\u7684. \u610f\u5473\u7740Redis\u7684string\u53ef\u4ee5\u5305\u542b\u4efb\u4f55\u6570\u636e. \u6bd4\u5982jpg\u56fe\u7247\u6216\u8005\u5e8f\u5217\u5316\u7684\u5bf9\u8c61.</li> <li>\u4e00\u4e2aRedis\u4e2d\u5b57\u7b26\u4e32value\u6700\u591a\u53ef\u4ee5\u662f512M</li> </ul>"},{"location":"redis/03_string/#operations","title":"Operations","text":"command description <code>get &lt;key&gt;</code> \u67e5\u8be2\u5bf9\u5e94\u952e\u503c <code>set &lt;key&gt; &lt;value&gt;</code> \u6dfb\u52a0\u952e\u503c\u5bf9 <code>append &lt;key&gt; &lt;value&gt;</code> \u5c06\u7ed9\u5b9a\u7684value\u8ffd\u52a0\u5230\u539f\u503c\u7684\u672b\u5c3e <code>strlen &lt;key&gt;</code> \u83b7\u5f97\u503c\u7684\u957f\u5ea6 <code>setnx &lt;key&gt; &lt;value&gt;</code> \u53ea\u6709\u5728key\u4e0d\u5b58\u5728\u65f6\u8bbe\u7f6e key\u7684\u503c <code>incr &lt;key&gt;</code> <ul><li>\u5c06key\u4e2d\u50a8\u5b58\u7684\u6570\u5b57\u503c+1</li><li>\u53ea\u80fd\u5bf9\u6570\u5b57\u503c\u64cd\u4f5c, \u5982\u679c\u4e3a\u7a7a, \u65b0\u589e\u503c\u4e3a1</li></ul> <code>decr &lt;key&gt;</code> <ul><li>\u5c06key\u4e2d\u50a8\u5b58\u7684\u6570\u5b57\u503c-1</li><li>\u53ea\u80fd\u5bf9\u6570\u5b57\u503c\u64cd\u4f5c, \u5982\u679c\u4e3a\u7a7a, \u65b0\u589e\u503c\u4e3a-1</li></ul> <code>incrby/decrby &lt;key&gt; &lt;step&gt;</code> \u5c06key\u4e2d\u50a8\u5b58\u7684\u6570\u5b57\u503c\u589e\u51cf, \u81ea\u5b9a\u4e49\u6b65\u957f <code>mset &lt;k1&gt; &lt;v1&gt; &lt;k2&gt; &lt;v2&gt; ...</code> \u540c\u65f6\u8bbe\u7f6e\u4e00\u4e2a\u6216\u591a\u4e2a key-Value\u5bf9 <code>mget &lt;k1&gt; &lt;k2&gt; ...</code> \u540c\u65f6\u83b7\u53d6\u4e00\u4e2a\u6216\u591a\u4e2avalue <code>msetnx &lt;k1&gt; &lt;v2&gt; &lt;k2&gt; &lt;v2&gt; ...</code> \u540c\u65f6\u8bbe\u7f6e\u4e00\u4e2a\u6216\u591a\u4e2a key-Value\u5bf9, \u5f53\u4e14\u4ec5\u5f53\u6240\u6709\u7ed9\u5b9akey\u90fd\u4e0d\u5b58\u5728 <code>getrange &lt;key&gt; &lt;start&gt; &lt;end&gt;</code> get value in range [start, end]. like substring <code>setrange &lt;key&gt; &lt;start&gt; &lt;value&gt;</code> overwrite value on key with position <code>start</code> <code>setex &lt;key&gt; &lt;expire&gt; &lt;value&gt;</code> set value with expire in seconds <code>getset &lt;ke&gt; &lt;value&gt;</code> set new value and return the old value"},{"location":"redis/04_list/","title":"List","text":""},{"location":"redis/04_list/#list_1","title":"List","text":"<ul> <li>\u5355\u952e\u591a\u503c</li> <li>Redis\u5217\u8868\u662f\u7b80\u5355\u7684\u5b57\u7b26\u4e32\u5217\u8868, \u6309\u7167\u63d2\u5165\u987a\u5e8f\u6392\u5e8f. \u4f60\u53ef\u4ee5\u6dfb\u52a0\u4e00\u4e2a\u5143\u7d20\u5230\u5217\u8868\u5934\u90e8 (\u5de6\u8fb9)\u6216\u8005\u5c3e\u90e8(\u53f3\u8fb9).</li> <li>\u5b83\u7684\u5e95\u5c42\u5b9e\u9645\u662f\u4e2a\u53cc\u5411\u94fe\u8868, \u5bf9\u4e24\u7aef\u7684\u64cd\u4f5c\u6027\u80fd\u5f88\u9ad8, \u901a\u8fc7\u7d22\u5f15\u4e0b\u6807\u7684\u64cd\u4f5c\u4e2d\u95f4\u7684\u8282\u70b9\u6027\u80fd\u4f1a\u8f83\u5dee\u3002</li> </ul>"},{"location":"redis/04_list/#commands","title":"Commands","text":"<ul> <li> <p><code>lpush/rpush &lt;key&gt; &lt;v1&gt; &lt;v2&gt; ...</code></p> <ul> <li>insert 1 or more values from left/right</li> </ul> </li> <li> <p><code>lpop/rpop &lt;key&gt;</code></p> <ul> <li>pop a value from left/right</li> <li>if no value left, key will be deleted.</li> </ul> </li> <li> <p><code>rpoplpush &lt;key1&gt; &lt;key2&gt;</code></p> <ul> <li>pop value from right key1 and push left to key2</li> </ul> </li> <li> <p><code>lrange &lt;key&gt; &lt;start&gt; &lt;end&gt;</code></p> <ul> <li>get elements by index in range</li> </ul> </li> <li> <p><code>lindex &lt;key&gt; &lt;index&gt;</code></p> <ul> <li>get element by index from left</li> </ul> </li> <li> <p><code>llen &lt;key&gt;</code></p> <ul> <li>get length of the list</li> </ul> </li> <li> <p><code>linsert &lt;key&gt; before &lt;value&gt; &lt;newValue&gt;</code></p> <ul> <li>insert the <code>newValue</code> after <code>value</code> from left</li> </ul> </li> <li> <p><code>lrem &lt;key&gt; &lt;n&gt; &lt;value&gt;</code></p> <ul> <li>delete n*value from left</li> <li>if n&lt;0, from right</li> <li>if n=0, delete all value in list</li> </ul> </li> </ul> <pre><code>lpush k1 vx vx vx\nlrem k1 2 vx\nlrange 0 -1\n# output: vx\n</code></pre>"},{"location":"redis/05_set/","title":"Set","text":""},{"location":"redis/05_set/#set_1","title":"Set","text":"<ul> <li>No duplicate values</li> <li>Not ordered</li> <li>O(1) add/delete/search</li> </ul>"},{"location":"redis/05_set/#commands","title":"Commands","text":"<ul> <li> <p><code>sadd &lt;key&gt; &lt;v1&gt; &lt;v2&gt;...</code></p> <ul> <li>add 1 or more values, if value already exists, it will be ignored</li> </ul> </li> <li> <p><code>smembers &lt;key&gt;</code></p> <ul> <li>get values from the set</li> </ul> </li> <li> <p><code>sismember &lt;key&gt; &lt;value&gt;</code></p> <ul> <li>check if value exists in set, 1: for true, 0: for false</li> </ul> </li> <li> <p><code>scard &lt;key&gt;</code></p> <ul> <li>get set size</li> </ul> </li> <li> <p><code>srem &lt;key&gt; &lt;v1&gt; &lt;v2&gt;</code></p> <ul> <li>remove value(s)</li> <li>no effect if value not in set</li> <li>returns delete count</li> </ul> </li> <li> <p><code>spop &lt;key&gt;</code></p> <ul> <li>pop out a value randomly</li> </ul> </li> <li> <p><code>srandmember key&gt; &lt;n&gt;</code></p> <ul> <li>randomly read n values from set, values won't be removed</li> </ul> </li> <li> <p><code>sinter &lt;key1&gt; &lt;key2&gt;</code></p> <ul> <li>return values of insect of 2 sets</li> </ul> </li> <li> <p><code>sunion &lt;key1&gt; &lt;key2&gt;</code></p> <ul> <li>return values of union of 2 sets</li> </ul> </li> <li> <p><code>sdiff &lt;key1&gt; &lt;key2&gt;</code></p> <ul> <li>return values of key1 except key2</li> </ul> </li> </ul>"},{"location":"redis/06_hash/","title":"Hash","text":""},{"location":"redis/06_hash/#hash_1","title":"Hash","text":"<ul> <li>value is <code>key: value</code> pairs, like json / hashmap</li> </ul>"},{"location":"redis/06_hash/#commands","title":"Commands","text":"<ul> <li> <p><code>hset &lt;key&gt; &lt;field&gt; &lt;value&gt;</code></p> <ul> <li>set <code>field: value</code> to hash (value of the key)</li> </ul> </li> <li> <p><code>hget &lt;key&gt; &lt;field&gt;</code></p> <ul> <li>get the value of <code>field</code> from hash </li> </ul> </li> <li> <p><code>hmset &lt;key&gt; &lt;f1&gt; &lt;v1&gt; &lt;f2&gt; &lt;v2&gt; ...</code></p> <ul> <li>set multiple field/value to hash</li> </ul> </li> <li> <p><code>hexists &lt;key&gt; &lt;field&gt;</code></p> <ul> <li>check if field in hash</li> </ul> </li> <li> <p><code>hkeys &lt;key&gt;</code></p> <ul> <li>list all fields in the hash</li> </ul> </li> <li> <p><code>hvals &lt;key&gt;</code></p> <ul> <li>list all values in the hash</li> </ul> </li> <li> <p><code>hincrby &lt;key&gt; &lt;field&gt; &lt;increment&gt;</code></p> <ul> <li>add increment to the value of field in hash</li> <li>if field not exist, will be added</li> <li>if value is not number, error </li> </ul> </li> <li> <p><code>hsetnx &lt;key&gt; &lt;field&gt; &lt;value&gt;</code></p> <ul> <li>only set field value when field not exists in hash</li> </ul> </li> </ul>"},{"location":"redis/07_zset/","title":"Zset (sorted set)","text":""},{"location":"redis/07_zset/#zset","title":"Zset","text":"<ul> <li>Zset is much like set, no duplicate values. but each value associated with a score, the score is used to sort (low to high.</li> <li>Value not duplicate, score can be duplicate</li> <li>Can be accessed by score range</li> </ul>"},{"location":"redis/07_zset/#commands","title":"Commands","text":"<ul> <li> <p><code>zadd &lt;key&gt; &lt;score1&gt; &lt;value1&gt; &lt;score2&gt; &lt;value2&gt; ...</code></p> <ul> <li>insert 1 or more values to zset</li> </ul> </li> <li> <p><code>zrange &lt;key&gt; &lt;start&gt; &lt;end&gt; [withscores]</code></p> <ul> <li>return values which score in range `[start, end]</li> <li> <p><code>withscores</code> will also return the score with value.</p> </li> <li> <p><code>withscores</code> will also return the score with value.</p> </li> </ul> </li> <li> <p><code>zrangebyscore key min max [withscores] [limit offset count]</code></p> <ul> <li>Returns all the elements in the sorted set at key with a score between min and max (including elements with score equal to min or max). The elements are considered to be ordered from low to high scores.</li> </ul> </li> <li> <p><code>zrevrangebyscore key max min [withscores] [limit offset count]</code></p> <ul> <li>same with above, but reversed order</li> </ul> </li> <li> <p><code>zincrby &lt;key&gt; &lt;increment&gt; &lt;value&gt;</code></p> <ul> <li>add score=score+increment for value</li> </ul> </li> <li> <p><code>zrem &lt;key&gt; &lt;value&gt;</code></p> <ul> <li>remove value</li> </ul> </li> <li> <p><code>zcount &lt;key&gt; &lt;min&gt; &lt;max&gt;</code></p> <ul> <li>return count score in range</li> </ul> </li> <li> <p><code>zrank &lt;key&gt; &lt;value&gt;</code></p> <ul> <li>return value rank sorted by score, start form 0</li> </ul> </li> </ul>"},{"location":"redis/08_redis_conf/","title":"Redis configuration file","text":""},{"location":"redis/08_redis_conf/#redisconf","title":"redis.conf","text":"<ul> <li>docker image: docker.io/bitnami/redis:latest, location: /opt/bitnami/redis/etc/redis.conf</li> <li><code>tcp-backlog</code> depends on /proc/sys/net/core/somaxconn, need set both.</li> <li><code>maxmemory-policy</code>: MAXMEMORY POLICY, how Redis will select what to remove when maxmemory is reached. You can select one from the following behaviors:<ul> <li>volatile-lru -&gt; Evict using approximated LRU, only keys with an expire set.</li> <li>allkeys-lru -&gt; Evict any key using approximated LRU.</li> <li>volatile-lfu -&gt; Evict using approximated LFU, only keys with an expire set.</li> <li>allkeys-lfu -&gt; Evict any key using approximated LFU.</li> <li>volatile-random -&gt; Remove a random key having an expire set.</li> <li>allkeys-random -&gt; Remove a random key, any key.</li> <li>volatile-ttl -&gt; Remove the key with the nearest expire time (minor TTL)</li> <li>noeviction -&gt; Don't evict anything, just return an error on write operations.<ul> <li>LRU means Least Recently Used</li> <li>LFU means Least Frequently Used</li> <li>Both LRU, LFU and volatile-ttl are implemented using approximated randomized algorithms.</li> </ul> </li> </ul> </li> </ul>"},{"location":"redis/09_transaction/","title":"Transactions","text":"<p>MULTI, EXEC, DISCARD and WATCH are the foundation of transactions in Redis. They allow the execution of a group of commands in a single step, with two important guarantees:</p> <ul> <li>All the commands in a transaction are serialized and executed sequentially.</li> <li>Either all of the commands or none are processed(processed does not mean success) , so a Redis transaction is also atomic. </li> <li>Errors inside a transaction does not rollback.</li> </ul>"},{"location":"redis/09_transaction/#related-commands","title":"Related commands","text":"<ul> <li>DISCARD</li> <li>EXEC</li> <li>MULTI</li> <li>UNWATCH</li> <li>WATCH</li> </ul>"},{"location":"redis/09_transaction/#no-roll-back","title":"No roll back","text":""},{"location":"redis/09_transaction/#redis","title":"Redis\u7684\u4e8b\u52a1\u5b9a\u4e49","text":"<ul> <li>Redis\u7684\u4e8b\u52a1\u662f\u4e00\u4e2a\u5355\u72ec\u7684\u9694\u79bb\u64cd\u4f5c\uff0c\u4e8b\u52a1\u4e2d\u6240\u6709\u547d\u4ee4\u90fd\u4f1a\u5e8f\u5217\u5316\uff0c\u6309\u987a\u5e8f\u6267\u884c\u3002\u5728\u6267\u884c\u4e8b\u52a1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4e0d\u4f1a\u88ab\u5176\u4ed6\u5ba2\u6237\u7aef\u53d1\u9001\u8fc7\u6765\u7684\u547d\u4ee4\u8bf7\u6c42\u6240\u6253\u65ad</li> <li>Redis\u4e8b\u52a1\u7684\u4e3b\u8981\u4f5c\u7528\u5c31\u662f\u4e32\u8054\u591a\u4e2a\u547d\u4ee4\u9632\u6b62\u63d2\u961f</li> </ul>"},{"location":"redis/09_transaction/#multi-exec-discard","title":"Multi, Exec, Discard","text":"<ul> <li>\u4ece\u8f93\u5165Multi\u547d\u4ee4\u5f00\u59cb\uff0c\u8f93\u5165\u7684\u547d\u4ee4\u90fd\u4f1a\u4f9d\u6b21\u8fdb\u5165\u961f\u5217\u4e2d\uff0c\u4f46\u4e0d\u4f1a\u6267\u884c\uff0c\u77e5\u9053\u8f93\u5165Exec\u540e\uff0cRedis\u4f1a\u4f9d\u6b21\u6267\u884c\u961f\u5217\u4e2d\u7684\u547d\u4ee4</li> <li>\u7ec4\u961f\u7684\u8fc7\u7a0b\u4e2d\u53ef\u4ee5\u901a\u8fc7Discard\u6765\u653e\u5f03\u7ec4\u961f </li> </ul>"},{"location":"redis/09_transaction/#_1","title":"\u4e8b\u52a1\u7684\u9519\u8bef\u5904\u7406","text":"<ul> <li>\u7ec4\u961f\u4e2d\u67d0\u4e2a\u547d\u4ee4\u51fa\u73b0\u4e86\u9519\u8bef\uff0c\u6267\u884c\u65f6\u6574\u4e2a\u961f\u5217\u90fd\u4f1a\u88ab\u53d6\u6d88\u3002 </li> <li>\u5982\u679c\u6267\u884c\u9636\u6bb5\u67d0\u4e2a\u547d\u4ee4\u62a5\u51fa\u9519\u8bef\uff0c\u5219\u53ea\u6709\u62a5\u9519\u547d\u4ee4\u4e0d\u4f1a\u88ab\u6267\u884c\uff0c\u5176\u4ed6\u547d\u4ee4\u90fd\u4f1a\u6267\u884c\uff0c\u4e0d\u4f1a\u56de\u6eda\u3002 </li> </ul>"},{"location":"redis/09_transaction/#optimistic-lock-vs-pessimistic-lock","title":"Optimistic lock vs Pessimistic lock","text":"<ul> <li> <p>\u60b2\u89c2\u9501(Pessimistic Lock)\uff0c \u987e\u540d\u601d\u4e49\uff0c\u5c31\u662f\u5f88\u60b2\u89c2\uff0c \u6bcf\u6b21\u53bb\u62ff\u6570\u636e\u7684\u65f6\u5019\u90fd\u4f1a\u8ba4\u4e3a\u522b\u4eba\u4f1a\u4fee\u6539\uff0c \u6240\u4ee5\u6bcf\u6b21\u5728\u62ff\u6570\u636e\u7684\u65f6\u5019\u90fd\u4f1a\u4e0a\u9501\uff0c \u8fd9\u6837\u522b\u4eba\u60f3\u62ff\u8fd9\u4e2a\u6570\u636e\u5c31\u4f1ablock\u76f4\u5230\u5b83\u62ff\u5230\u9501\u3002\u4f20\u7edf\u7684\u5173\u7cfb\u578b\u6570\u636e\u5e93\u91cc\u8fb9\u5c31\u7528\u5230\u4e86\u5f88\u591a\u8fd9\u79cd\u9501\u673a\u5236\uff0c \u6bd4\u5982\u884c\u9501\uff0c\u8868\u9501\uff0c\u8bfb\u9501\uff0c\u5199\u9501\u7b49\u3002\u90fd\u662f\u5728\u505a\u64cd\u4f5c\u4e4b\u524d\u5148\u4e0a\u9501\u3002</p> </li> <li> <p>\u4e50\u89c2\u9501(Optimistic Lock)\uff0c\u987e\u540d\u60a3\u4e49\uff0c\u5c31\u662f\u5f88\u4e50\u89c2\uff0c \u6bcf\u6b21\u53bb\u62ff\u6570\u636e\u7684\u65f6\u5019\u90fd\u8ba4\u4e3a\u522b\u4eba\u4e0d\u4f1a\u4fee\u6539\uff0c \u6240\u4ee5\u4e0d\u4f1a\u4e0a\u9501\uff0c \u4f46\u662f\u5728\u66f4\u65b0\u7684\u65f6\u5019\u4f1a\u5224\u65ad\u4e00\u4e0b\u5728\u6b64\u671f\u95f4\u522b\u4eba\u6709\u6ca1\u6709\u53bb\u66f4\u65b0\u8fd9\u4e2a\u6570\u636e\uff0c\u53ef\u4ee5\u4f7f\u7528\u7248\u672c\u53f7\u7b49\u673a\u5236\u3002\u4e50\u89c2\u9501\u9002\u7528\u4e8e\u591a\u8bfb\u7684\u5e94\u7528\u7c7b\u578b\uff0c\u8fd9\u7965\u53ef\u4ee5\u63d0\u9ad8\u541e\u5410\u91cf\u3002 Redis\u5c31\u662f\u5229\u7528\u8fd9\u79cdCheck-and-Set\u673a\u5236\u5b9e\u73b0\u4e8b\u52a1\u7684\u3002</p> </li> </ul> <p></p>"},{"location":"redis/09_transaction/#watch-key1-key2","title":"<code>Watch key1 [key2 ...]</code>","text":"<ul> <li>\u5728\u6267\u884cMULTI\u4e4b\u524d\u5148\u6267\u884c<code>Watch key1[key2 ...]</code>\u53ef\u4ee5\u76d1\u89c6\u4e00\u4e2a(\u6216\u591a\u4e2a)key, \u5982\u679c\u5728\u4e8b\u52a1\u6267\u884c\u4e4b\u524d\u8fd9\u4e2a(\u6216\u8fd9\u4e9b)key\u88ab\u5176\u4ed6\u547d\u4ee4\u6539\u52a8\uff0c\u90a3\u4e48\u4e8b\u52a1\u5c06\u88ab\u4e2d\u65ad\u3002</li> </ul>"},{"location":"redis/09_transaction/#unwatch","title":"<code>Unwatch</code>","text":"<ul> <li>\u53d6\u6d88<code>Watch</code>\u547d\u4ee4\u5bf9\u6240\u6709key\u7684\u76d1\u89c6</li> <li>\u5982\u679c\u5728\u6267\u884c<code>Watch</code>\u4e4b\u540e\uff0c <code>Exec</code>\u6216\u8005<code>Discard</code>\u547d\u4ee4\u5148\u88ab\u6267\u884c\uff0c\u90a3\u4e48\u5c31\u4e0d\u9700\u8981\u518d\u6267\u884c<code>Unwatch</code>\u4e86\u3002</li> </ul>"},{"location":"redis/10_persistance_rdb/","title":"Redis Persistence - RDB","text":""},{"location":"redis/10_persistance_rdb/#redis-persistence","title":"Redis Persistence","text":"<ul> <li>RDB (Redis DataBase)</li> <li>AOF (Append Of File)</li> </ul>"},{"location":"redis/10_persistance_rdb/#rdb","title":"RDB","text":"<ul> <li>\u5728\u6307\u5b9a\u7684\u65f6\u95f4\u95f4\u9694\u5185\u5c06\u5185\u5b58\u4e2d\u7684\u6570\u636e\u96c6\u5feb\u7167(Snapshot)\u5199\u5165\u78c1\u76d8, \u6062\u590d\u65f6\u5c06\u5feb\u7167\u76f4\u63a5\u8bfb\u5230\u5185\u5b58\u91cc\u3002</li> </ul>"},{"location":"redis/10_persistance_rdb/#_1","title":"\u5907\u4efd\u662f\u5982\u4f55\u6267\u884c\u7684","text":"<ul> <li>Redis\u4f1a\u5355\u72ec\u521b\u5efa (fork) \u4e00\u4e2a\u5b50\u8fdb\u7a0b\u6765\u8fdb\u884c\u6301\u4e45\u5316\uff0c \u4f1a\u5148\u5c06\u6570\u636e\u5199\u5165\u5230\u4e00\u4e2a\u4e34\u65f6\u6587\u4ef6\u4e2d\uff0c \u5f85\u6301\u4e45\u5316\u8fc7\u7a0b\u90fd\u7ed3\u675f\u4e86\uff0c \u518d\u7528\u8fd9\u4e2a\u4e34\u65f6\u6587\u4ef6\u66ff\u6362\u4e0a\u6b21\u6301\u4e45\u5316\u597d\u7684\u6587\u4ef6\u3002 \u6574\u4e2a\u8fc7\u7a0b\u4e2d\uff0c \u4e3b\u8fdb\u7a0b\u662f\u4e0d\u8fdb\u884c\u4efb\u4f55\u64cd\u4f5c\u7684\u3002 \u8fd9\u5c31\u786e\u4fdd\u4e86\u6781\u9ad8\u7684\u6027\u80fd\u3002\u5982\u6817\u9700\u8981\u8fdb\u884c\u5927\u89c4\u6a21\u7684\u6570\u636e\u6062\u590d\uff0c \u4f46\u5bf9\u4e8e\u6570\u636e\u6062\u590d\u7684\u5b8c\u6574\u6027\u4e0d\u662f\u975e\u5e38\u654f\u611f\uff0c \u90a3RDB\u65b9\u5f0f\u8981\u6bd4APF\u65b9\u5f0f\u66f4\u52a0\u7684\u9ad8\u6548\u3002 RDB\u7684\u7f3a\u70b9\u662f\u6700\u540e\u4e00\u6b21\u6301\u4e45\u5316\u540e\u7684\u6570\u636e\u53ef\u80fd\u4e22\u5931\u3002</li> </ul>"},{"location":"redis/10_persistance_rdb/#fork","title":"\u5173\u4e8efork","text":"<ul> <li>\u5728Linux\u7a0b\u5e8f\u4e2d<code>fork</code>\u4f1a\u4ea7\u751f\u4e00\u4e2a\u548c\u7236\u8fdb\u7a0b\u5b8c\u5168\u76f8\u540c\u7684\u5b50\u8fdb\u7a0b\u3002 \u4f46\u5b50\u8fdb\u7a0b\u5728\u6b64\u540e\u591a\u4f1a\u6267\u884c\u7cfb\u7edf\u8c03\u7528\uff0c \u51fa\u4e8e\u6548\u7387\u8003\u8651\uff0c Linux\u4e2d\u5f15\u5165\u4e86 \"\u5199\u65f6\u590d\u5236\" (copy on write)\u6280\u672f\uff0c \u4e00\u80a1\u5029\u51b5\u7236\u8fdb\u7a0b\u548c\u5b50\u8ff8\u7a0b\u4f1a\u5171\u7528\u540c\u4e00\u6bb5\u7269\u7406\u5185\u5b58\uff0c \u53ea\u6709\u8fdb\u7a0b\u7a7a\u95f4\u7684\u5404\u6bb5\u7684\u5185\u5bb9\u800d\u53d1\u751f\u53d8\u5316\u65f6\uff0c \u624d\u4f1a\u5c06\u7236\u8fdb\u7a0b\u7684\u5185\u5bb9\u590d\u5236\u4e00\u4efd\u7ed9\u5b50\u8fdb\u7a0b \u3002</li> </ul>"},{"location":"redis/10_persistance_rdb/#rdbpath-and-file-name","title":"RDB\u7684\u4fdd\u5b58\u6587\u4ef6(path and file name)","text":"<ul> <li>redis.conf <pre><code>dbfilename dump.rdb\n...\ndir ./\n...\n</code></pre></li> </ul>"},{"location":"redis/10_persistance_rdb/#rdb-persistence-policy","title":"RDB Persistence policy","text":"<ul> <li> <p>Interval and Changes <pre><code># Save the DB on disk:\n#\n#   save &lt;seconds&gt; &lt;changes&gt;\n#\n#   Will save the DB if both the given number of seconds and the given\n#   number of write operations against the DB occurred.\n#\n#   In the example below the behavior will be to save:\n#   after 900 sec (15 min) if at least 1 key changed\n#   after 300 sec (5 min) if at least 10 keys changed\n#   after 60 sec if at least 10000 keys changed\n#\n#   Note: you can disable saving completely by commenting out all \"save\" lines.\n#\n#   It is also possible to remove all the previously configured save\n#   points by adding a save directive with a single empty string argument\n#   like in the following example:\n#\n#   save \"\"\n\nsave 900 1\nsave 300 10\nsave 60 10000\n</code></pre></p> </li> <li> <p>Manaul persist snapshot using command</p> <ul> <li><code>save</code> -  blocking</li> <li><code>bgsave</code> - nonblocking, background</li> </ul> </li> <li> <p><code>stop-writes-on-bgsave-error yes</code>\uff1a \u5f53redis\u65e0\u6cd5\u5199\u5165\u78c1\u76d8\u8bdd\uff0c\u76f4\u63a5\u5173\u6389redis\u7684\u5199\u64cd\u4f5c</p> </li> <li> <p><code>rdbcompression yes</code>: \u6587\u4ef6\u538b\u7f29</p> </li> <li> <p><code>rdbchecksum yes</code>: \u4f7f\u7528CRC64\u7b97\u6cd5\u8fdb\u884c\u6570\u636e\u6821\u9a8c\uff0c \u4f46\u662f\u8fd9\u6837\u505a\u4f1a\u589e\u52a0\u5927\u7ea610%\u7684\u6027\u80fd\u6d88\u8017\uff0c \u5982\u679c\u5e0c\u671b\u83b7\u53d6\u5230\u6700\u5927\u7684\u6027\u80fd\uff0c \u53ef\u4ee5\u5173\u95ed\u6b64\u529f\u80fd\u3002</p> </li> </ul>"},{"location":"redis/10_persistance_rdb/#rdb-backup","title":"RDB backup","text":"<ul> <li>\u5148\u901a\u8fc7<code>config get dir</code>\u547d\u4ee4\u67e5\u8be2rdb\u6587\u4ef6\u7684\u76ee\u5f55</li> <li>\u5c06<code>*.rdb</code>\u7684\u6587\u4ef6\u62f7\u8d1d\u5230\u522b\u7684\u5730\u65b9</li> </ul>"},{"location":"redis/10_persistance_rdb/#rdb-recovery","title":"RDB recovery","text":"<ul> <li>Shutdown Redis</li> <li>copy backup file to redis working folder</li> <li>start redis, data will be loaded </li> </ul>"},{"location":"redis/10_persistance_rdb/#rdb_1","title":"RDB \u7684\u4f18\u70b9","text":"<ul> <li>\u8282\u7701\u78c1\u76d8\u7a7a\u95f4</li> <li>\u6062\u590d\u5feb\u901f</li> </ul>"},{"location":"redis/10_persistance_rdb/#rdb_2","title":"RDB \u7684\u7f3a\u70b9","text":"<ul> <li>\u867d\u7136Redis\u5728<code>fork</code>\u65f6\u4f7f\u7528\u4e86\u5199\u65f6\u62f7\u8d1d\u6280\u672f\uff0c\u4f46\u662f\u5982\u679c\u6570\u636e\u91cf\u5e9e\u5927\u65f6\uff0c\u8fd8\u662f\u6bd4\u8f83\u6d88\u8017\u6027\u80fd\u3002</li> <li>\u5982\u679c\u5728\u5907\u4efd\u5468\u671f\u4e2d\u95f4redis down\u673a\uff0c\u53ef\u80fd\u4e22\u5931\u6570\u636e</li> </ul>"},{"location":"redis/11_persistence_aof/","title":"Redis Persistence - AOF","text":""},{"location":"redis/11_persistence_aof/#aof","title":"AOF","text":"<ul> <li> <p>\u4ee5\u66f0\u5fd7\u7684\u5f62\u5f0f\u6765\u8bb0\u5f55\u6bcf\u4e2a\u5199\u64cd\u4f5c\uff0c \u5c06Redis\u6267\u884c\u8fc7\u7684\u6240\u6709\u5199\u6307\u4ee4\u8bb0\u5f55\u4e0b\u6765(\u8bfb\u64cd\u4f5c\u4e0d\u8bb0\u5f55)\uff0c \u53ea\u8bb8\u8ffd\u52a0\u6587\u4ef6\u4f46\u4e0d\u53ef\u4ee5\u6539\u5199\u6587\u4ef6\uff0c Redis\u542f\u52a8\u4e4b\u521d\u4f1a\u8bfb\u53d6\u8be5\u6587\u4ef6\u91cd\u65b0\u6784\u5efa\u6570\u636e\u3002 </p> </li> <li> <p>AOF\u9ed8\u8ba4\u4e0d\u5f00\u542f\uff0c\u9700\u8981\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u914d\u7f6e <pre><code>...\nappendonly yes\n# The name of the append only file (default: \"appendonly.aof\")\nappendfilename \"appendonly.aof\"\n</code></pre></p> </li> </ul>"},{"location":"redis/11_persistence_aof/#aof_1","title":"AOF\u6587\u4ef6\u6545\u969c\u5907\u4efd","text":"<ul> <li> <p>AOF\u7684\u5907\u673a\u5236\u548c\u6027\u80fd\u867d\u7136\u548cRDB\u4e0d\u540c\uff0c\u4f46\u662f\u5907\u4efd\u548c\u6062\u590d\u64cd\u4f5c\u540cRDB\u4e00\u6837\uff0c\u90fd\u662f\u62f7\u8d1d\u5907\u4efd\u6587\u4ef6\uff0c\u9700\u8981\u6062\u590d\u65f6\u518d\u62f7\u8d1d\u5230Redis\u5de5\u4f5c\u76ee\u5f55\u4e0b\uff0c\u542f\u52a8\u7cfb\u7edf\u5373\u52a0\u8f7d\u3002</p> </li> <li> <p>AOF\u548cRDB\u540c\u65f6\u542f\u52a8\uff0c\u7cfb\u7edf\u9ed8\u8ba4\u8bfb\u53d6AOF\u7684\u6570\u636e</p> </li> </ul>"},{"location":"redis/11_persistence_aof/#aof_2","title":"AOF\u6587\u4ef6\u68c0\u67e5\uff0c\u6062\u590d","text":"<p>\u5982\u679cAOF\u6587\u4ef6\u635f\u574f\uff0c\u53ef\u4ee5\u901a\u8fc7redis\u63d0\u4f9b\u7684\u5916\u90e8\u5de5\u5177\u8fdb\u884c\u6062\u590d <pre><code>redis-check-aof --fix appendonly.aof\n</code></pre> RDB have the same utility: <code>redis-check-rdb</code></p>"},{"location":"redis/11_persistence_aof/#aofconfig","title":"AOF\u540c\u6b65\u9891\u7387\u8bbe\u7f6e(config\u6587\u4ef6\u914d\u7f6e)","text":"<ul> <li><code>always</code>\uff1a \u6bcf\u6b21\u5199\u5165\u90fd\u4f1a\u540c\u6b65</li> <li><code>everysec</code>\uff1a \u6bcf\u79d2</li> <li><code>no</code>\uff1a \u4e0d\u4e3b\u52a8\u540c\u6b65\uff0c\u628a\u540c\u6b65\u65f6\u673a\u4ea4\u7ed9\u64cd\u4f5c\u7cfb\u7edf\u7ba1\u7406</li> </ul>"},{"location":"redis/11_persistence_aof/#rewrite","title":"Rewrite","text":"<ul> <li>AOF\u91c7\u7528\u6587\u4ef6\u8ffd\u52a0\u65b9\u5f0f\uff0c \u6587\u4ef6\u4f1a\u8d8a\u6765\u8d8a\u5927\u3002 \u4e3a\u907f\u514d\u51fa\u73b0\u6b64\u79cd\u60c5\u51b5\uff0c\u65b0\u589e\u4e86\u91cd\u5199\u673a\u5236\uff0c \u5f53AOF\u6587\u4ef6\u7684\u5927\u5c0f\u8d85\u8fc7\u6240\u8bbe\u5b9a\u7684\u9608\u503c\u65f6\uff0c Redis\u5c31\u4f1a\u542f\u52a8AOF\u6587\u4ef6\u7684\u5185\u5bb9\u538b\u7f29, \u53ea\u4fdd\u7559\u53ef\u4ee5\u6062\u590d\u6570\u636e\u7684\u6700\u5c0f\u4ee4\u96c6\u3002 \u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4<code>bgrewriteaof</code>\u3002</li> </ul>"},{"location":"redis/11_persistence_aof/#redis","title":"Redis\u5982\u4f55\u5b9e\u73b0\u91cd\u5199?","text":"<ul> <li>AOF\u6587\u4ef6\u6301\u7eed\u589e\u957f\u800c\u8fc7\u5927\u65f6\uff0c \u4f1a<code>fork</code>\u51fa\u4e00\u4e2a\u65b0\u8fdb\u7a0b\u6765\u5c06\u6587\u4ef6\u91cd\u5199(\u4e5f\u662f\u5148\u5199\u5165\u4e34\u65f6\u6587\u4ef6\uff0c\u518drename), \u904d\u5386\u65b0\u8fdb\u7a0b\u7684\u5185\u5b58\u4e2d\u6570\u636e\uff0c \u6bcf\u6761\u8bb0\u5f55\u6709\u4e00\u6761\u7684set\u8bed\u53e5\u3002 \u91cd\u5199AOF\u6587\u4ef6\u5e76\u4e0d\u8bfb\u53d6\u65e7\u7684AOF\u6587\u4ef6\uff0c\u800c\u662f\u5c06\u5185\u5b58\u6570\u636e\u5e93\u7684\u5185\u5bb9\u7528\u547d\u4ee4\u65b9\u5f0f\u91cd\u5199\u4e00\u904d\u3002</li> </ul>"},{"location":"redis/11_persistence_aof/#config","title":"\u4f55\u65f6\u91cd\u5199(config\u6587\u4ef6\u914d\u7f6e)","text":"<ul> <li>\u91cd\u5199\u867d\u7136\u53ef\u4ee5\u8282\u7ea6\u5927\u91cf\u78c1\u76d8\u7a7a\u95f4 \u51cf\u5c11\u2032\u6062\u590d\u65f6\u95f4\u3002 \u4f46\u662f\u6bcf\u6b21\u91cd\u5199\u8fd8\u662f\u6709\u4e00\u5b9a\u7684\u8d1f\u62c5\u7684\u3002 \u56e0\u6b64\u8bbe\u5b9aRedis\u8981\u6ee1\u8db3\u4e00\u5b9a\u6761\u4ef6\u624d\u4f1a\u8fdb\u884c\u91cd\u5199\u3002 <pre><code>auto-aof-rewrite-percentage 100\nauto-aof-rewrite-min-size 64mb\n</code></pre></li> <li>\u7cfb\u7edf\u8f7d\u5165\u65f6\u6216\u8005\u4e0a\u6b21\u91cd\u5199\u5b8c\u6bd5\u65f6\uff0c Redis\u4f1a\u8bb0\u5f55\u6b64\u65f6AOF\u6587\u4ef6\u5927\u5c0f\uff0c\u8bbe\u4e3a<code>base_size</code>\uff0c\u5982\u679c\u5f53\u524dAOF\u6587\u4ef6\u5927\u5c0f<code>&gt;=base_Size+base_Size*100%</code> (\u9ed8\u8ba4)\u4e14\u5f53\u524d\u5927\u5c0f<code>&gt;=64mb</code>(\u9ed8\u8ba4)\u7684\u60c5\u51b5\u4e0b\uff0credis\u4f1a\u8fdb\u884cAOF\u91cd\u5199\u3002</li> </ul>"},{"location":"redis/11_persistence_aof/#aof_3","title":"AOF\u7684\u4f18\u70b9","text":"<ul> <li>\u5907\u4efd\u673a\u5236\u7a33\u5065\uff0c \u4e22\u5931\u6570\u636e\u6982\u7387\u4f4e</li> <li>\u53ef\u8bfb\u7684\u65e5\u5fd7\u6587\u4ef6\uff0c \u53ef\u4ee5\u5904\u7406\u8bef\u64cd\u4f5c</li> </ul>"},{"location":"redis/11_persistence_aof/#aof_4","title":"AOF\u7f3a\u70b9","text":"<ul> <li>\u6bd4RDB\u5360\u7528\u66f4\u591a\u7684\u78c1\u76d8\u7a7a\u95f4</li> <li>\u6062\u590d\u5907\u4efd\u901f\u5ea6\u6162</li> <li>\u6bcf\u6b21\u5199\u90fd\u540c\u6b65\u7684\u8bdd\uff0c\u6709\u4e00\u5b9a\u7684\u6027\u80fd\u635f\u5931</li> <li>Has some known issues</li> </ul>"},{"location":"redis/11_persistence_aof/#_1","title":"\u7528\u54ea\u4e2a\u597d","text":"<ul> <li>\u5b98\u65b9\u63a8\u8350\u4e24\u4e2a\u90fd\u542f\u7528\u3002</li> <li>\u5982\u679c\u5bf9\u6570\u636e\u4e0d\u654f\u611f\uff0c \u53ef\u4ee5\u5355\u72ec\u7528RDB\u3002</li> <li>\u4e0d\u5efa\u8bae\u5355\u72ec\u4f7f\u7528AOF, for there is known issues.</li> <li>\u5982\u679c\u7eaf\u505a\u7f13\u5b58\uff0c \u53ef\u4ee5\u90fd\u4e0d\u7528\u3002</li> </ul>"},{"location":"redis/12_replication/","title":"Redis Replication","text":""},{"location":"redis/12_replication/#what-is-replication","title":"What is replication","text":"<ul> <li>\u4e3b\u4ece\u590d\u5236\uff0c\u5c31\u662f\u4e3b\u673a\u6570\u636e\u66f4\u65b0\u540e\u6839\u636e\u914d\u7f6e\u548c\u7b56\u7565\uff0c\u81ea\u52a8\u540c\u6b65\u5230\u5907\u673a\u7684master/slave\u673a\u5236\u3002Master\u4ee5\u5199\u4e3a\u4e3b\uff0cSlave\u4ee5\u8bfb\u4e3a\u4e3b\u3002</li> </ul>"},{"location":"redis/12_replication/#_1","title":"\u7528\u5904","text":"<ul> <li> <p>\u8bfb\u5199\u5206\u79bb\uff0c\u6027\u80fd\u6269\u5c55</p> </li> <li> <p>\u5bb9\u707e\u5feb\u901f\u6062\u590d</p> </li> </ul> <p></p>"},{"location":"redis/12_replication/#commands","title":"Commands","text":"<ul> <li> <p><code>info replication</code></p> <p>show replication information</p> </li> <li> <p><code>replicaof &lt;ip&gt; &lt;port&gt;</code></p> <p>\u6210\u4e3a\u67d0\u4e2a\u5b9e\u4f8b\u7684\u4ece\u670d\u52a1\u5668</p> </li> </ul>"},{"location":"redis/12_replication/#config-replica-read-only","title":"Config: <code>replica-read-only</code>","text":"<pre><code>if `yes`, write via slave is not allowed, this will protect slave from untrusted write. This is recommended.\n</code></pre>"},{"location":"redis/12_replication/#_2","title":"\u590d\u5236\u539f\u7406","text":"<ul> <li> <p>\u6bcf\u4ece\u673a\u8054\u901a\u540e\u2032\uff0c\u90fd\u4f1a\u7ed9\u4e3b\u673a\u53d1\u9001Sync\u547d\u4ee4</p> </li> <li> <p>\u4e3b\u673a\u7acb\u523b\u8fdb\u884c\u5b58\u76d8\u64cd\u4f5c\uff0c\u53d1\u9001RDB\u6587\u4ef6\u7ed9\u4ece\u673a</p> </li> <li> <p>\u4ece\u673a\u6536\u5230RDB\u6587\u4ef6\u540e\uff0c\u8fdb\u884c\u5168\u76d8\u52a0\u8f7d</p> </li> <li> <p>\u4e4b\u540e\u6bcf\u6b21\u4e3b\u673a\u7684\u5199\u64cd\u4f5c\uff0c\u90fd\u4f1a\u7acb\u523b\u53d1\u9001\u7ed9\u4ece\u673a\uff0c\u4ece\u673a\u6267\u884c\u76f8\u540c\u7684\u547d\u4ee4</p> </li> </ul> <p></p>"},{"location":"redis/12_replication/#chained-replica","title":"Chained Replica","text":"<ul> <li> <p>\u4e0a\u4e00\u4e2aSlave\u53ef\u4ee5\u662f\u4e0b\u4e00\u4e2aSlave\u7684Master\u3002Slave\u540c\u7965\u53ef\u4ee5\u63a5\u6536\u5176\u4ed6Slaves\u7684\u8fde\u63a5\u548c\u540c\u6b65\u8bf7\u6c42\uff0c\u90a3\u4e48\u8be5Slave\u4f5c\u4e3a\u94fe\u6761\u4e2d\u4e0b\u4e00\u4e2a\u7684master\uff0c \u53ef\u4ee5\u6709\u6548\u51cf\u8f7bMaster\u7684\u538b\u529b\uff0c\u53bb\u4e2d\u5fc3\u5316\u964d\u4f4e\u98ce\u9669\u3002</p> </li> <li> <p>\u7528<code>replicaof &lt;ip&gt; &lt;port&gt;</code></p> </li> <li> <p>\u4e2d\u9014\u53d8\u66f4\u8f6c\u5411\uff0c\u4f1a\u6e05\u9664\u6570\u636e\uff0c\u91cd\u65b0\u5efa\u7acb\u62f7\u8d1d\u6700\u65b0\u7684\u3002</p> </li> <li> <p>\u98ce\u9669\u662f\u4e2d\u95f4\u4e00\u4e2aSlave down\u673a\uff0c\u540e\u7eedSlave\u65e0\u6cd5\u62f7\u8d1d</p> </li> </ul> <p></p>"},{"location":"redis/12_replication/#some-points","title":"Some points","text":"<ul> <li>any slave down and start again, it by default become a standalone master. Need re-run <code>replicaof</code> to join the replication again.</li> <li>master down, none of slave will promote to master. When master back the relation remain.</li> </ul>"},{"location":"redis/12_replication/#manual-change-slave-to-master","title":"Manual change slave to master(\u53cd\u5ba2\u4e3a\u4e3b)","text":"<ul> <li>\u5f53\u4e00\u4e2amaster\u5b95\u673a\u540e\uff0c\u540e\u9762\u7684slave\u53ef\u4ee5\u7acb\u523b\u5347\u7ea7\u4e3amaster,\u5176\u540e\u9762\u7684slave\u4e0d\u7528\u505a\u4efb\u4f55\u4fee\u6539\u3002</li> <li>\u7528<code>replicaof no one</code>\u5c06\u4ece\u673a\u53d8\u4e3a\u4e3b\u673a\u3002</li> </ul>"},{"location":"redis/12_replication/#sentinel","title":"Sentinel(\u54e8\u5175\u6a21\u5f0f)","text":"<ul> <li>\u53cd\u5ba2\u4e3a\u4e3b\u7684\u81ea\u52a8\u7248\uff0c\u80fd\u591f\u540e\u53f0\u76d1\u63a7\u4e3b\u673a\u662f\u5426\u6545\u969c\uff0c\u5982\u679c\u4e3b\u673a\u6545\u969c\uff0c\u6839\u636e\u6295\u7968\u6570\u5c06\u4ece\u673a\u53d8\u4e3a\u4e3b\u673a\u3002</li> </ul>"},{"location":"redis/12_replication/#_3","title":"\u914d\u7f6e\u54e8\u5175","text":"<ul> <li>1 master, 2 slaves, not chained.</li> <li>create conf/sentinel.conf <pre><code>sentinel monitor mymaster 127.0.0.1 6379 1\n</code></pre> \u5176\u4e2dmymaster\u4e3a\u76d1\u63a7\u5bf9\u8c61\u8d77\u7684\u670d\u52a1\u5668\u540d\u79f0, 1\u4f4d\u81f3\u5c11\u6709\u591a\u5c11\u4e2a\u54e8\u5175\u540c\u610f\u8fc1\u79fb\u7684\u6570\u91cf\u3002</li> </ul>"},{"location":"redis/12_replication/#_4","title":"\u542f\u52a8\u54e8\u5175","text":"<pre><code>redis-sentinel conf/sentinel.conf\n</code></pre>"},{"location":"redis/12_replication/#slave-promote-rule","title":"Slave promote rule:","text":"<ul> <li>\u4f18\u5148\u7ea7\u9760\u524d\u7684<ul> <li>redis.conf\u4e2d<code>replica-priority</code>\u503c, less (not 0) = higer priority</li> <li>0 means never promote </li> </ul> </li> <li>\u504f\u79fb\u91cf\u5927\u7684(\u6570\u636e\u6700\u65b0)</li> <li>\u670d\u52a1runid (a generated guid for service instance)\u6700\u5c0f\u7684</li> </ul>"},{"location":"redis/13_cluster/","title":"Redis Cluster","text":""},{"location":"redis/13_cluster/#_1","title":"\u4ec0\u4e48\u662f\u96c6\u7fa4","text":"<ul> <li> <p>Redis\u96c6\u7fa4\u5b9e\u73b0\u4e86\u5bf9Redis\u7684\u6c34\u5e73\u6269\u5bb9\uff0c\u5373\u542f\u52a8N\u4e2aRedis\u8282\u70b9\uff0c\u5c06\u6574\u4e2a\u6570\u636e\u5e93\u5206\u5e03\u5b58\u50a8\u5728\u8fd9N\u4e2a\u8282\u70b9\u4e2d\uff0c\u6bcf\u4e2a\u8282\u70b9\u5b58\u50a8\u603b\u6570\u636e\u76841/N\u3002</p> </li> <li> <p>Redis\u96c6\u7fa4\u901a\u8fc7\u5206\u533a(partition)\u6765\u63d0\u4f9b\u4e00\u5b9a\u7a0b\u5ea6\u7684\u53ef\u7528\u6027(availablity):\u5373\u4f7f\u96c6\u7fa4\u4e2d\u6709\u4e00\u90e8\u5206\u8282\u70b9\u5931\u6548\u6216\u8005\u65e0\u6cd5\u8fdb\u884c\u901a\u8baf\uff0c\u96c6\u7fa4\u4e5f\u53ef\u4ee5\u7ee7\u7eed\u5904\u7406\u547d\u4ee4\u8bf7\u6c42\u3002</p> </li> <li> <p>\u901a\u8fc7 <code>cluster nodes</code> \u547d\u4ee4\u67e5\u770b\u96c6\u7fa4\u4fe1\u606f</p> </li> <li> <p>\u6bcf\u4e2a\u8282\u70b9\uff0c\u53ef\u4ee5\u6709Replicaiton, \u5e76\u6709\u5185\u7f6e\u7684\u54e8\u5175\u673a\u5236(\u81ea\u52a8failover)</p> </li> <li> <p>\u4e00\u4e2a\u96c6\u7fa4\u81f3\u5c113\u4e2a\u4e3b\u8282\u70b9\u3002 \u6bcf\u4e2a\u4e3b\u8282\u70b9\u81f3\u5c11\u4e00\u4e2areplication</p> </li> <li> <p>\u5206\u914d\u539f\u5219\u5c3d\u91cf\u4fdd\u8bc1\u6bcf\u4e2a\u4e3b\u6570\u636e\u5e93\u884c\u5728\u4e0d\u540c\u7684IP\u5730\u5740\uff0c\u6bcf\u4e2a\u4ece\u5e93\u548c\u4e3b\u5e93\u4e0d\u5728\u4e00\u4e2aIP\u5730\u5740\u4e0a\u3002</p> </li> </ul>"},{"location":"redis/13_cluster/#slots","title":"\u4ec0\u4e48\u662fslots","text":"<ul> <li> <p>\u4e00\u4e2a Redis \u96c6\u7fa4\u5305\u542b 16384 \u4e2a\u63d2\u69fd (hash slot)\uff0c \u6570\u636e\u5e93\u4e2d\u7684\u6bcf\u4e2a\u952e\u503c\u90fd\u5c5e\u4e8e\u8fd916384\u4e2a\u63d2\u69fd\u7684\u5176\u4e2d\u4e00\u4e2a\uff0c \u96c6\u7fa4\u4f7f\u7528\u516c\u5f0f <code>CRC16(key) % 16384</code> \u6765\u8ba1\u7b97\u952e <code>key</code> \u5c5e\u4e8e\u90a3\u4e2a\u63d2\u69fd\uff0c\u2032 \u5176\u4e2d <code>CRC16(key)</code>\u8bed\u53e5\u7528\u4e8e\u8ba1\u7b97\u952e <code>key</code>\u7684<code>CRC16</code>\u6821\u9a8c\u548c \u3002</p> </li> <li> <p>\u96c6\u7fa4\u4e2d\u7684\u6bcf\u4e2a\u8282\u70b9\u8d1f\u8d23\u5904\u7406\u4e00\u90e8\u5206\u63d2\u69fd\u3002 \u4e3e\u4e2a\u4f8b\u5b50\uff0c\u5982\u679c\u4e00\u4e2a\u96c6\u7fa4\u53ef\u4ee5\u67093\u4e2a\u4e3b\u8282\u70b9\u2032 \u5176\u4e2d:</p> <ul> <li>\u8282\u70b9A\u8d1f\u8d23\u5904\u74060\u53f7\u81f3 5500\u53f7\u63d2\u69fd\u3002</li> <li>\u8282\u70b9 B \u8d1f\u8d23\u5904\u7406 5501 \u53f7\u81f3 11000 \u53f7\u63d2\u69fd\u3002</li> <li>\u8282\u70b9C\u8d1f\u8d23\u5904\u7406 11001 \u53f7\u81f316383\u53f7\u63d2\u69fd\u3002</li> </ul> </li> </ul>"},{"location":"redis/13_cluster/#hash-source-code","title":"Hash Source Code","text":""},{"location":"redis/13_cluster/#setinsert","title":"\u5728\u96c6\u7fa4\u4e2dset/insert\u503c","text":"<ul> <li> <p>\u5728redis-cli\u6bcf\u6b21\u5f55\u5165\uff0c\u67e5\u8be2\u952e\u503c\uff0credis\u90fd\u4f1a\u8ba1\u7b97\u51fa\u8be5key\u5e94\u8be5\u9001\u5f80\u7684\u63d2\u6f15, \u5982\u679c\u4e0d\u662f\u8be5\u5ba2\u6237\u7aef\u5bf9\u5e94\u7684\u670d\u52a1\u5668\u63d2\u69fd\uff0credis\u4f1a\u62a5\u9519\u5e76\u544a\u77e5\u5e94\u524d\u5f80\u7684redis\u5b9e\u4f8b\u5730\u5740\u548c\u7aef\u53e3\u3002</p> </li> <li> <p>redis-cli\u63d0\u4f9b\u4e86 <code>-c</code> \u53c2\u6570\u5b9e\u73b0\u81ea\u52a8\u91cd\u5b9a\u5411\u3002     </p> <ul> <li>\u4f8b\u5982 <code>redis-cli -c -p6379</code> \u767b\u5165\u540e, \u518d\u5f55\u5165\u3001 \u67e5\u8be2\u952e\u503c\u53ef\u4ee5\u81ea\u52a8\u91cd\u5b9a\u5411\u3002</li> </ul> </li> <li> <p>\u4e0d\u5728\u4e00\u4e2asolt\u4e0b\u7684\u952e\u503c\uff0c\u662f\u4e0d\u80fd\u4f7f\u7528mget, mset\u7b49\u591a\u952e\u64cd\u4f5c\u7684</p> </li> <li> <p>\u53ef\u4ee5\u901a\u8fc7{}\u6765\u5b9a\u4e49\u7ec4\u7684\u6982\u5ff5\uff0c\u4ece\u800c\u662fkey\u4e2d{}\u5185\u76f8\u540c\u5185\u5bb9\u7684\u952e\u503c\u5bf9\u5e94\u5230\u540c\u4e00\u4e2aslot\u4e2d\u53bb\u3002</p> </li> </ul> <p></p>"},{"location":"redis/13_cluster/#_2","title":"\u67e5\u8be2\u96c6\u7fa4\u4e2d\u7684\u503c","text":"<ul> <li> <p><code>CLUSTER KEYSLOT &lt;key&gt;</code> \u8ba1\u7b97\u952e key \u5e94\u8be5\u88ab\u653e\u7f6e\u5728\u90a3\u4e2a\u69fd\u4e0a\u3002</p> </li> <li> <p><code>CLUSTER COUNTKEYSINSLOT &lt;slot&gt;</code> \u8fd4\u56de\u69fdslot\u76ee\u524d\u5305\u542b\u7684\u952e\u503c\u5bf9\u7684\u6570\u91cf\u3002</p> </li> <li> <p><code>CLUSTER GETKEYINSLOT &lt;slot&gt; &lt;count&gt;</code> \u8fd4\u56decount\u4e2aslot\u69fd\u4e2d\u7684\u952e</p> </li> </ul>"},{"location":"redis/13_cluster/#configuration","title":"Configuration","text":"<ul> <li>cluster-require-full-coverage  : If this is set to yes, as it is by default, the cluster stops accepting writes if some percentage of the key space is not covered by any node. If the option is set to no, the cluster will still serve queries even if only requests about a subset of keys can be processed."}]}